<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ДШВ | UKRAINE GTA</title>
    
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap" rel="stylesheet">
    
    <style>
        :root {
            --primary: #22c55e;
            --primary-bright: #4ade80;
            --bg: #030507;
            --card-bg: rgba(255, 255, 255, 0.03); 
            --modal-bg: rgba(10, 15, 26, 0.98);
            --inner-glass: rgba(255, 255, 255, 0.04);
            --text-gray: #94a3b8;
        }

        /* АНТИ-СЕЛЕКТОР (Заборона виділення тексту) */
        * { 
            box-sizing: border-box; 
            outline: none; 
            -webkit-user-select: none; 
            -moz-user-select: none; 
            -ms-user-select: none; 
            user-select: none; 
        }
        
        /* Дозволяємо виділення тільки в полях вводу */
        input, textarea {
            -webkit-user-select: text;
            -moz-user-select: text;
            -ms-user-select: text;
            user-select: text;
        }

        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: var(--bg); }
        ::-webkit-scrollbar-thumb { 
            background: linear-gradient(180deg, var(--primary-bright), var(--primary));
            border-radius: 10px;
        }

        body {
            margin: 0; padding: 0;
            background-color: var(--bg);
            color: white; font-family: 'Inter', sans-serif;
            overflow-x: hidden;
            line-height: 1.6;
        }

        .hero {
            height: 100vh;
            display: flex; flex-direction: column; align-items: center; justify-content: center;
            background: radial-gradient(circle at 50% 50%, rgba(34, 197, 94, 0.15) 0%, #030507 100%);
            position: relative; text-align: center; padding: 20px;
        }

        .hero-badge {
            background: rgba(34, 197, 94, 0.1);
            border: 1px solid var(--primary);
            color: var(--primary-bright);
            padding: 8px 20px; border-radius: 100px;
            font-size: 12px; font-weight: 800; letter-spacing: 2px;
            margin-bottom: 24px; text-transform: uppercase;
        }

        .hero h1 {
            font-size: clamp(40px, 8vw, 90px);
            font-weight: 900; line-height: 0.9; margin: 0;
            letter-spacing: -2px; text-transform: uppercase;
        }

        .hero p {
            color: var(--text-gray); font-size: clamp(16px, 2vw, 20px);
            max-width: 600px; margin: 30px 0;
        }

        .btn-group { display: flex; gap: 15px; flex-wrap: wrap; justify-content: center; }

        .btn-main {
            background: var(--primary); color: black;
            padding: 18px 40px; border-radius: 14px;
            font-weight: 800; text-decoration: none;
            transition: 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            text-transform: uppercase; font-size: 14px; border: none; cursor: pointer;
        }

        .btn-main:hover {
            transform: translateY(-3px);
            box-shadow: 0 15px 30px rgba(34, 197, 94, 0.3);
            background: var(--primary-bright);
        }

        .btn-secondary {
            background: rgba(255, 255, 255, 0.05); color: white;
            padding: 18px 40px; border-radius: 14px;
            font-weight: 800; text-decoration: none;
            transition: 0.3s; border: 1px solid rgba(255, 255, 255, 0.1);
            text-transform: uppercase; font-size: 14px; cursor: pointer;
        }

        .btn-secondary:hover { background: rgba(255, 255, 255, 0.1); }

        .section { padding: 100px 20px; max-width: 1200px; margin: 0 auto; }

        .grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 25px; margin-top: 50px;
        }

        .card {
            background: var(--card-bg);
            border: 1px solid rgba(255, 255, 255, 0.05);
            padding: 40px; border-radius: 30px;
            transition: 0.4s; position: relative; overflow: hidden;
        }

        .card:hover {
            border-color: var(--primary);
            transform: translateY(-10px);
        }

        .modal {
            display: none; position: fixed; top: 0; left: 0;
            width: 100%; height: 100%;
            background: rgba(0, 0, 0, 0.95);
            z-index: 1000; align-items: center; justify-content: center;
            backdrop-filter: blur(15px); padding: 20px;
        }

        .modal-content {
            background: var(--modal-bg);
            width: 100%; max-width: 450px;
            padding: 50px; border-radius: 35px;
            border: 1px solid rgba(34, 197, 94, 0.2);
            position: relative;
        }

        .form-group { margin-bottom: 20px; }
        label { display: block; font-size: 12px; color: var(--text-gray); margin-bottom: 8px; text-transform: uppercase; font-weight: 700; }
        
        input, textarea {
            width: 100%; background: var(--inner-glass);
            border: 1px solid rgba(255, 255, 255, 0.1);
            padding: 16px; border-radius: 14px;
            color: white; font-size: 15px; transition: 0.3s;
        }

        input:focus { border-color: var(--primary); background: rgba(34, 197, 94, 0.05); }

        .error-msg { color: #ef4444; font-size: 13px; margin-top: 10px; display: none; text-align: center; }

        @media (max-width: 768px) {
            .hero h1 { font-size: 45px; }
            .modal-content { padding: 30px; }
        }
    </style>
</head>
<body oncontextmenu="return false;">

    <section class="hero">
        <div class="hero-badge" data-aos="fade-down">Збройні Сили України</div>
        <h1 data-aos="zoom-in">ДЕCАНТНО-ШТУРМОВІ<br><span style="color: var(--primary)">ВІЙСЬКА</span></h1>
        <p data-aos="fade-up" data-aos-delay="200">Еліта Збройних Сил України. Ми завжди перші, ми завжди там, де найважче. Приєднуйся до найкращих.</p>
        <div class="btn-group" data-aos="fade-up" data-aos-delay="400">
            <button class="btn-main" onclick="openModal('regModal')">Стати частиною ДШВ</button>
            <button id="cabinetBtn" class="btn-secondary" onclick="window.location.href='cabinet.html'">Увійти до системи</button>
        </div>
    </section>

    <section class="section" id="apply">
        <div style="text-align: center; margin-bottom: 60px;">
            <h2 style="font-size: 40px; font-weight: 800;">ПОДАТИ РАПОРТ</h2>
            <p style="color: var(--text-gray)">Заповніть анкету для вступу до лав підрозділу</p>
        </div>

        <div class="card" style="max-width: 700px; margin: 0 auto;" data-aos="fade-up">
            <form id="applicationForm">
                <div class="form-group">
                    <label>Ваш Нікнейм (Ім'я Прізвище)</label>
                    <input type="text" id="appName" placeholder="Наприклад: Олександр Коваль" required>
                </div>
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
                    <div class="form-group">
                        <label>Звання в грі</label>
                        <input type="text" id="appRank" placeholder="Ваше звання" required>
                    </div>
                    <div class="form-group">
                        <label>Discord ID</label>
                        <input type="text" id="appDiscord" placeholder="user#0000" required>
                    </div>
                </div>
                <div class="form-group">
                    <label>Чому саме ви повинні бути в ДШВ?</label>
                    <textarea id="appMotivation" rows="4" placeholder="Ваша мотивація..." required></textarea>
                </div>
                <button type="submit" id="appSubmitBtn" class="btn-main" style="width: 100%">Відправити рапорт</button>
            </form>
        </div>
    </section>

    <div id="regModal" class="modal">
        <div class="modal-content">
            <h2 style="margin-top: 0; font-size: 28px; font-weight: 800;">РЕЄСТРАЦІЯ</h2>
            <p style="color: var(--text-gray); font-size: 14px; margin-bottom: 30px;">Створіть акаунт для доступу до системи.</p>
            
            <form id="regForm">
                <div class="form-group">
                    <label>Ім'я та Прізвище (як у рапорті)</label>
                    <input type="text" id="regName" placeholder="Введіть ваш Нікнейм" required>
                </div>
                <div class="form-group">
                    <label>Email адреса</label>
                    <input type="email" id="regEmail" placeholder="example@mail.com" required>
                </div>
                <div class="form-group">
                    <label>Придумайте пароль</label>
                    <input type="password" id="regPassword" placeholder="Мінімум 6 символів" required>
                </div>
                <button type="submit" class="btn-main" style="width: 100%">Зареєструватися</button>
                <div id="regError" class="error-msg"></div>
            </form>
            <button class="btn-secondary" onclick="closeModal('regModal')" style="width: 100%; margin-top: 15px; border: none;">Скасувати</button>
        </div>
    </div>

    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-app.js";
        import { getAuth, createUserWithEmailAndPassword, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-auth.js";
        import { getFirestore, collection, addDoc, serverTimestamp, query, where, getDocs, setDoc, doc } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js";

        const firebaseConfig = {
            apiKey: "AIzaSyATUpLUHSp1VbyxkJXhMS-2R71zNOBGC00",
            authDomain: "dsv-gta.firebaseapp.com",
            projectId: "dsv-gta",
            storageBucket: "dsv-gta.firebasestorage.app",
            messagingSenderId: "661591588818",
            appId: "1:661591588818:web:a8e8dca3d061447e24d20b"
        };

        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);
        const db = getFirestore(app);

        window.openModal = (id) => document.getElementById(id).style.display = 'flex';
        window.closeModal = (id) => document.getElementById(id).style.display = 'none';

        // РЕЄСТРАЦІЯ З ПЕРЕВІРКОЮ РАПОРТУ
        document.getElementById('regForm').addEventListener('submit', async (e) => {
            e.preventDefault();
            const errEl = document.getElementById('regError');
            errEl.style.display = 'none';

            const name = document.getElementById('regName').value;
            const email = document.getElementById('regEmail').value;
            const password = document.getElementById('regPassword').value;

            try {
                // ПЕРЕВІРКА: чи є схвалений рапорт
                const appQ = query(collection(db, "applications"), where("name", "==", name), where("status", "==", "approved"));
                const appSnap = await getDocs(appQ);

                if (appSnap.empty) {
                    throw new Error("Ваш рапорт не знайдено або він ще не схвалений!");
                }

                const userCredential = await createUserWithEmailAndPassword(auth, email, password);
                const user = userCredential.user;

                await setDoc(doc(db, "users", user.uid), {
                    uid: user.uid,
                    name: name,
                    email: email,
                    role: "user",
                    rank: "Рекрут",
                    points: 0,
                    joinedAt: serverTimestamp()
                });

                window.location.href = 'cabinet.html';
            } catch (err) {
                errEl.innerText = err.message;
                errEl.style.display = 'block';
            }
        });

        // Форма рапорту
        document.getElementById('applicationForm').addEventListener('submit', async (e) => {
            e.preventDefault();
            const btn = document.getElementById('appSubmitBtn');
            btn.innerText = "Відправка..."; btn.disabled = true;

            try {
                await addDoc(collection(db, "applications"), {
                    name: document.getElementById('appName').value,
                    rank: document.getElementById('appRank').value,
                    discord: document.getElementById('appDiscord').value,
                    motivation: document.getElementById('appMotivation').value,
                    status: "new",
                    date: serverTimestamp()
                });
                alert("Рапорт успішно надіслано!");
                e.target.reset();
            } catch (err) { alert("Помилка: " + err.message); }
            finally { 
                btn.innerText = "Відправити рапорт"; btn.disabled = false; 
            }
        });

        onAuthStateChanged(auth, user => {
            if(user) {
                const btn = document.getElementById('cabinetBtn');
                btn.innerText = "ОСОБИСТИЙ КАБІНЕТ";
                btn.style.background = "var(--primary)";
                btn.style.color = "black";
            }
        });

        AOS.init({ duration: 1000, once: true });
    </script>

    <script>
        // 1. Блокує все: F12, Ctrl+Shift+I, J, C, U, S
        document.onkeydown = function(e) {
            if (e.keyCode == 123 || 
                (e.ctrlKey && e.shiftKey && (e.keyCode == 73 || e.keyCode == 74 || e.keyCode == 67)) || 
                (e.ctrlKey && (e.keyCode == 85 || e.keyCode == 83))) {
                return false;
            }
        };

        // 2. Блокування правої кнопки миші
        document.addEventListener('contextmenu', e => e.preventDefault());
        
        // 3. Заборона перетягування контенту
        document.ondragstart = () => false;

        // 4. Debugger-пастка (Заморозка вкладки при відкритті консолі)
        (function() {
            var freeze = function() {
                setInterval(function() {
                    debugger;
                }, 50);
            };
            try { freeze(); } catch (e) {}
        })();
    </script>
</body>
</html>
