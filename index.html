<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ДШВ | UKRAINE GTA - Елітний підрозділ ЗСУ</title>
    
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&display=swap" rel="stylesheet">
    
    <style>
        :root {
            --primary: #22c55e;
            --primary-bright: #4ade80;
            --primary-dark: #16a34a;
            --bg: #030507;
            --bg-secondary: #0a0c10;
            --card-bg: rgba(15, 18, 25, 0.7);
            --glass-bg: rgba(255, 255, 255, 0.03);
            --glass-border: rgba(34, 197, 94, 0.15);
            --text-gray: #94a3b8;
            --text-dim: #64748b;
            --danger: #ef4444;
            --modal-overlay: rgba(0, 0, 0, 0.95);
        }

        * { 
            margin: 0; 
            padding: 0; 
            box-sizing: border-box; 
        }
        
        html { 
            scroll-behavior: smooth;
            overflow-x: hidden;
        }
        
        ::-webkit-scrollbar { width: 10px; }
        ::-webkit-scrollbar-track { background: var(--bg); }
        ::-webkit-scrollbar-thumb { 
            background: linear-gradient(180deg, var(--primary-bright), var(--primary)); 
            border-radius: 10px; 
        }

        body {
            background-color: var(--bg);
            background-image: 
                radial-gradient(circle at 20% 30%, rgba(34, 197, 94, 0.15) 0%, transparent 50%),
                radial-gradient(circle at 80% 70%, rgba(34, 197, 94, 0.1) 0%, transparent 50%);
            background-attachment: fixed;
            color: white;
            font-family: 'Inter', sans-serif;
            overflow-x: hidden;
            line-height: 1.6;
            width: 100%;
            max-width: 100vw;
        }

        /* ==================== NAVIGATION ==================== */
        nav {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px 6%;
            background: rgba(3, 5, 7, 0.9);
            backdrop-filter: blur(20px);
            position: fixed;
            width: 100%;
            max-width: 100vw;
            z-index: 1000;
            border-bottom: 1px solid var(--glass-border);
            transition: all 0.3s ease;
            left: 0;
            right: 0;
        }

        nav.scrolled {
            padding: 12px 6%;
            background: rgba(3, 5, 7, 0.98);
            box-shadow: 0 4px 30px rgba(0, 0, 0, 0.3);
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 12px;
            text-decoration: none;
            color: white;
            font-weight: 900;
            font-size: 18px;
            transition: 0.3s;
        }

        .logo:hover { transform: scale(1.05); }

        .logo-box {
            background: var(--primary);
            color: black;
            padding: 8px 16px;
            border-radius: 8px;
            font-weight: 900;
            box-shadow: 0 0 20px rgba(34, 197, 94, 0.4);
            letter-spacing: 1px;
        }

        .nav-links {
            display: flex;
            gap: 8px;
            align-items: center;
        }

        .nav-link {
            color: white;
            text-decoration: none;
            font-size: 14px;
            font-weight: 600;
            padding: 10px 18px;
            border-radius: 10px;
            opacity: 0.85;
            transition: all 0.3s;
            cursor: pointer;
            position: relative;
        }

        .nav-link::before {
            content: '';
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 0;
            height: 2px;
            background: var(--primary);
            transition: width 0.3s;
        }

        .nav-link:hover {
            opacity: 1;
            color: var(--primary-bright);
        }

        .nav-link:hover::before { width: 60%; }

        /* Admin Dropdown */
        .admin-dropdown {
            position: relative;
            display: inline-block;
        }

        .admin-dropdown-btn {
            color: white;
            font-size: 14px;
            font-weight: 600;
            padding: 10px 18px;
            border-radius: 10px;
            opacity: 0.85;
            transition: all 0.3s;
            cursor: pointer;
            background: rgba(34, 197, 94, 0.1);
            border: 1px solid var(--glass-border);
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .admin-dropdown-btn:hover {
            opacity: 1;
            background: rgba(34, 197, 94, 0.2);
            border-color: var(--primary);
        }

        .admin-dropdown-content {
            display: none;
            position: absolute;
            top: calc(100% + 10px);
            right: 0;
            background: rgba(15, 18, 25, 0.98);
            backdrop-filter: blur(20px);
            min-width: 220px;
            border-radius: 16px;
            border: 1px solid var(--glass-border);
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.5);
            z-index: 1001;
            overflow: hidden;
            animation: dropdownSlide 0.3s ease;
        }

        @keyframes dropdownSlide {
            from {
                opacity: 0;
                transform: translateY(-10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .admin-dropdown:hover .admin-dropdown-content {
            display: block;
        }

        .admin-dropdown-item {
            color: white;
            padding: 14px 20px;
            text-decoration: none;
            display: flex;
            align-items: center;
            gap: 12px;
            transition: all 0.3s;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
        }

        .admin-dropdown-item:last-child {
            border-bottom: none;
        }

        .admin-dropdown-item:hover {
            background: rgba(34, 197, 94, 0.1);
            color: var(--primary-bright);
            padding-left: 25px;
        }

        .btn-primary {
            background: var(--primary);
            color: black;
            padding: 12px 24px;
            border-radius: 10px;
            font-weight: 800;
            border: none;
            cursor: pointer;
            font-size: 13px;
            text-transform: uppercase;
            box-shadow: 0 0 20px rgba(34, 197, 94, 0.3);
            transition: all 0.3s;
            text-decoration: none;
            display: inline-block;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 0 30px rgba(34, 197, 94, 0.5);
            background: var(--primary-bright);
        }

        .btn-outline {
            background: transparent;
            color: white;
            border: 2px solid var(--primary);
            padding: 10px 22px;
        }

        .btn-outline:hover {
            background: var(--primary);
            color: black;
        }

        /* Burger Menu */
        .burger {
            display: none;
            flex-direction: column;
            gap: 5px;
            cursor: pointer;
            z-index: 2001;
        }

        .burger span {
            width: 28px;
            height: 3px;
            background: var(--primary);
            border-radius: 2px;
            transition: 0.3s;
        }

        .burger.active span:nth-child(1) { transform: translateY(8px) rotate(45deg); }
        .burger.active span:nth-child(2) { opacity: 0; }
        .burger.active span:nth-child(3) { transform: translateY(-8px) rotate(-45deg); }

        @media (max-width: 950px) {
            .burger { display: flex; }
            
            .nav-links {
                position: fixed;
                top: 0;
                right: -100%;
                width: 100%;
                height: 100vh;
                background: rgba(3, 5, 7, 0.99);
                backdrop-filter: blur(25px);
                flex-direction: column;
                justify-content: center;
                transition: 0.5s;
                z-index: 2000;
                gap: 30px;
            }
            
            .nav-links.active { right: 0; }
            .nav-link { font-size: 22px; }
            
            .admin-dropdown-content {
                position: static;
                display: none;
                background: rgba(0, 0, 0, 0.3);
                border: none;
                box-shadow: none;
                margin-top: 10px;
            }
            
            .admin-dropdown.active .admin-dropdown-content {
                display: block;
            }
        }

        /* ==================== HERO SECTION ==================== */
        .hero {
            position: relative;
            min-height: 100vh;
            display: flex;
            align-items: center;
            padding: 120px 6% 80px;
            overflow: hidden;
        }

        .hero-bg {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            opacity: 0.15;
            z-index: 0;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1200 800"><defs><linearGradient id="g" x1="0%" y1="0%" x2="100%" y2="100%"><stop offset="0%" style="stop-color:%2322c55e;stop-opacity:0.1"/><stop offset="100%" style="stop-color:%2322c55e;stop-opacity:0"/></linearGradient></defs><rect fill="url(%23g)" width="1200" height="800"/></svg>') center/cover;
        }

        .hero-content {
            position: relative;
            z-index: 1;
            max-width: 1400px;
            margin: 0 auto;
            width: 100%;
            text-align: center;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .hero-badge {
            display: inline-flex;
            align-items: center;
            gap: 10px;
            background: rgba(34, 197, 94, 0.1);
            border: 1px solid var(--glass-border);
            padding: 12px 24px;
            border-radius: 50px;
            font-size: 13px;
            font-weight: 700;
            color: var(--primary-bright);
            margin-bottom: 30px;
            backdrop-filter: blur(10px);
            box-shadow: 0 0 20px rgba(34, 197, 94, 0.1);
        }

        .hero-title {
            font-size: clamp(42px, 8vw, 85px);
            font-weight: 900;
            line-height: 1.1;
            margin-bottom: 25px;
            background: linear-gradient(135deg, #ffffff 0%, var(--primary-bright) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .hero-subtitle {
            color: var(--primary-bright);
            font-weight: 900;
            font-size: clamp(16px, 3vw, 22px);
            letter-spacing: 4px;
            margin-bottom: 25px;
            text-shadow: 0 0 20px rgba(34, 197, 94, 0.3);
        }

        .hero-description {
            max-width: 700px;
            color: var(--text-gray);
            font-size: 18px;
            line-height: 1.8;
            margin-bottom: 40px;
        }

        .hero-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-top: 60px;
            max-width: 900px;
            width: 100%;
        }

        .stat-card {
            background: var(--card-bg);
            backdrop-filter: blur(10px);
            border: 1px solid var(--glass-border);
            border-radius: 20px;
            padding: 30px;
            text-align: center;
            transition: all 0.3s;
        }

        .stat-card:hover {
            transform: translateY(-5px);
            border-color: var(--primary);
            box-shadow: 0 10px 40px rgba(34, 197, 94, 0.2);
        }

        .stat-label {
            font-size: 11px;
            color: var(--text-gray);
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: 12px;
        }

        .stat-value {
            font-size: 40px;
            font-weight: 900;
            color: white;
            line-height: 1;
        }

        .stat-value.loading {
            width: 40px;
            height: 40px;
            border: 3px solid rgba(255,255,255,0.1);
            border-left-color: var(--primary);
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 0 auto;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        .stat-highlight {
            color: var(--primary-bright);
            font-size: 28px;
            font-weight: 800;
        }

        /* ==================== WHY SECTION ==================== */
        .why-section {
            padding: 100px 6%;
            background: var(--bg-secondary);
            position: relative;
            overflow: hidden;
        }

        .why-grid {
            display: flex;
            flex-direction: column;
            gap: 40px;
            max-width: 1400px;
            margin: 0 auto;
        }

        .why-card {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 40px;
            background: var(--card-bg);
            backdrop-filter: blur(20px);
            border: 1px solid var(--glass-border);
            border-radius: 30px;
            padding: 50px;
            align-items: center;
            transition: all 0.4s;
            position: relative;
            overflow: hidden;
        }

        .why-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(34, 197, 94, 0.05), transparent);
            transition: 0.6s;
        }

        .why-card:hover::before {
            left: 100%;
        }

        .why-card:hover {
            transform: translateY(-5px);
            border-color: var(--primary);
            box-shadow: 0 20px 60px rgba(34, 197, 94, 0.15);
        }

        .why-card-reverse {
            grid-template-columns: 1fr 1fr;
        }

        .why-card-reverse .why-content {
            order: 2;
        }

        .why-card-reverse .why-image {
            order: 1;
        }

        .why-content {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .why-badge {
            display: inline-block;
            background: linear-gradient(135deg, var(--primary), var(--primary-bright));
            color: black;
            padding: 8px 20px;
            border-radius: 30px;
            font-size: 12px;
            font-weight: 800;
            text-transform: uppercase;
            letter-spacing: 1px;
            width: fit-content;
            box-shadow: 0 0 20px rgba(34, 197, 94, 0.3);
        }

        .why-title {
            font-size: 32px;
            font-weight: 900;
            line-height: 1.2;
            color: white;
        }

        .why-text {
            font-size: 16px;
            line-height: 1.8;
            color: var(--text-gray);
        }

        .why-image {
            width: 100%;
            height: 400px;
            border-radius: 20px;
            overflow: hidden;
            position: relative;
            background: rgba(0,0,0,0.3);
            border: 1px solid var(--glass-border);
        }

        .why-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.5s;
        }

        .why-card:hover .why-image img {
            transform: scale(1.1);
        }

        .why-image-placeholder {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: var(--text-dim);
            font-size: 14px;
            text-align: center;
        }

        .aircraft-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-top: 10px;
        }

        .aircraft-tag {
            background: rgba(34, 197, 94, 0.1);
            border: 1px solid var(--glass-border);
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 14px;
            font-weight: 700;
            color: var(--primary-bright);
        }

        @media (max-width: 968px) {
            .why-card,
            .why-card-reverse {
                grid-template-columns: 1fr;
                padding: 30px;
            }

            .why-card-reverse .why-content,
            .why-card-reverse .why-image {
                order: unset;
            }

            .why-image {
                height: 300px;
            }

            .why-title {
                font-size: 24px;
            }
        }

        /* ==================== FEATURES SECTION ==================== */
        .section {
            padding: 100px 6%;
            position: relative;
            overflow: hidden;
        }

        .section-header {
            text-align: center;
            margin-bottom: 70px;
        }

        .section-title {
            font-size: clamp(32px, 6vw, 55px);
            font-weight: 900;
            margin-bottom: 20px;
            line-height: 1.2;
        }

        .section-subtitle {
            color: var(--text-gray);
            font-size: 18px;
            max-width: 600px;
            margin: 0 auto;
        }

        .features-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 30px;
            max-width: 1200px;
            margin: 0 auto;
        }

        .feature-card {
            background: var(--card-bg);
            backdrop-filter: blur(15px);
            border: 1px solid var(--glass-border);
            border-radius: 24px;
            padding: 40px;
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            position: relative;
            overflow: hidden;
        }

        .feature-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.05), transparent);
            transition: 0.5s;
        }

        .feature-card:hover::before { left: 100%; }

        .feature-card:hover {
            transform: translateY(-10px) scale(1.02);
            border-color: var(--primary);
            box-shadow: 0 20px 60px rgba(34, 197, 94, 0.2);
        }

        .feature-icon {
            font-size: 36px;
            margin-bottom: 20px;
        }

        .feature-title {
            font-size: 20px;
            font-weight: 800;
            margin-bottom: 12px;
        }

        .feature-text {
            color: var(--text-gray);
            font-size: 15px;
            line-height: 1.7;
        }

        /* ==================== GALLERY SECTION ==================== */
        .gallery-section {
            background: var(--bg-secondary);
            padding: 100px 6%;
            position: relative;
            overflow: hidden;
        }

        .gallery-main-viewer {
            position: relative;
            max-width: 1200px;
            margin: 0 auto 40px;
            border-radius: 30px;
            overflow: hidden;
            background: var(--card-bg);
            border: 1px solid var(--glass-border);
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
        }

        .gallery-main-image {
            width: 100%;
            height: 600px;
            position: relative;
            background: rgba(0,0,0,0.5);
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .gallery-main-image img {
            width: 100%;
            height: 100%;
            object-fit: contain;
            transition: opacity 0.3s;
        }

        .gallery-nav-btn {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            background: rgba(0, 0, 0, 0.7);
            backdrop-filter: blur(10px);
            border: 1px solid var(--glass-border);
            color: white;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s;
            z-index: 10;
        }

        .gallery-nav-btn:hover {
            background: var(--primary);
            color: black;
            transform: translateY(-50%) scale(1.1);
            border-color: var(--primary);
        }

        .gallery-prev { left: 20px; }
        .gallery-next { right: 20px; }

        .gallery-main-info {
            padding: 30px;
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(10px);
        }

        .gallery-main-caption {
            font-size: 20px;
            font-weight: 700;
            color: white;
            margin-bottom: 10px;
        }

        .gallery-main-meta {
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 14px;
            color: var(--text-gray);
        }

        .gallery-thumbnails {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            gap: 15px;
            max-width: 1200px;
            margin: 0 auto;
        }

        .gallery-thumb {
            aspect-ratio: 1;
            border-radius: 12px;
            overflow: hidden;
            cursor: pointer;
            border: 2px solid transparent;
            transition: all 0.3s;
            position: relative;
        }

        .gallery-thumb img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.3s;
        }

        .gallery-thumb:hover img {
            transform: scale(1.1);
        }

        .gallery-thumb.active {
            border-color: var(--primary);
            box-shadow: 0 0 20px rgba(34, 197, 94, 0.5);
        }

        .gallery-thumb:hover {
            border-color: var(--primary-bright);
        }

        /* ==================== NEWS SECTION ==================== */
        .news-section {
            background: var(--bg);
            overflow: hidden;
        }

        .news-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
            gap: 30px;
            max-width: 1400px;
            margin: 0 auto;
        }

        .news-card {
            background: var(--card-bg);
            backdrop-filter: blur(15px);
            border: 1px solid var(--glass-border);
            border-radius: 24px;
            overflow: hidden;
            transition: all 0.4s;
            cursor: pointer;
            position: relative;
        }

        .news-edit-btn,
        .news-delete-btn {
            position: absolute;
            top: 15px;
            z-index: 10;
            background: rgba(0, 0, 0, 0.8);
            border: 1px solid var(--glass-border);
            color: white;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            cursor: pointer;
            font-size: 18px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: 0.3s;
            backdrop-filter: blur(10px);
        }

        .news-edit-btn {
            right: 65px;
        }

        .news-edit-btn:hover {
            background: var(--primary);
            color: black;
            transform: scale(1.1);
        }

        .news-delete-btn {
            right: 15px;
        }

        .news-delete-btn:hover {
            background: var(--danger);
            transform: scale(1.1);
        }

        .news-card:hover {
            transform: translateY(-10px);
            border-color: var(--primary);
            box-shadow: 0 20px 60px rgba(34, 197, 94, 0.2);
        }

        .news-image {
            width: 100%;
            height: 220px;
            overflow: hidden;
            position: relative;
            background: rgba(0,0,0,0.5);
        }

        .news-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.5s;
        }

        .news-card:hover .news-image img {
            transform: scale(1.1);
        }

        .news-content {
            padding: 25px;
        }

        .news-title {
            font-size: 20px;
            font-weight: 800;
            color: white;
            margin-bottom: 12px;
            line-height: 1.3;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }

        .news-description {
            font-size: 14px;
            color: var(--text-gray);
            line-height: 1.7;
            margin-bottom: 15px;
            display: -webkit-box;
            -webkit-line-clamp: 3;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }

        .news-footer {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding-top: 15px;
            border-top: 1px solid rgba(255,255,255,0.05);
        }

        .news-date {
            font-size: 12px;
            color: var(--text-dim);
            font-weight: 600;
        }

        .news-link {
            color: var(--primary);
            font-size: 13px;
            font-weight: 700;
            text-decoration: none;
            transition: 0.3s;
        }

        .news-link:hover {
            color: var(--primary-bright);
        }

        .news-empty {
            grid-column: 1/-1;
            text-align: center;
            color: var(--text-gray);
            padding: 80px 20px;
            font-size: 16px;
        }

        /* ==================== APPLICATION FORM ==================== */
        .form-section {
            padding: 100px 6%;
            background: linear-gradient(135deg, var(--bg) 0%, var(--bg-secondary) 100%);
            overflow: hidden;
        }

        .form-container {
            max-width: 700px;
            margin: 0 auto;
            background: var(--card-bg);
            backdrop-filter: blur(20px);
            border: 1px solid var(--glass-border);
            border-radius: 30px;
            padding: 50px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
        }

        .form-input,
        .form-textarea {
            width: 100%;
            padding: 18px 20px;
            background: rgba(0, 0, 0, 0.4);
            border: 2px solid rgba(255, 255, 255, 0.1);
            color: white;
            border-radius: 14px;
            font-size: 15px;
            font-family: inherit;
            outline: none;
            margin-bottom: 20px;
            transition: all 0.3s;
        }

        .form-input:focus,
        .form-textarea:focus {
            border-color: var(--primary);
            background: rgba(0, 0, 0, 0.6);
            box-shadow: 0 0 0 4px rgba(34, 197, 94, 0.1);
        }

        .form-input::placeholder,
        .form-textarea::placeholder {
            color: var(--text-dim);
        }

        .form-textarea {
            resize: vertical;
            min-height: 120px;
        }

        .btn-submit {
            width: 100%;
            background: var(--primary);
            color: black;
            padding: 18px;
            border: none;
            border-radius: 14px;
            font-weight: 900;
            font-size: 16px;
            text-transform: uppercase;
            cursor: pointer;
            transition: all 0.3s;
            letter-spacing: 1px;
        }

        .btn-submit:hover {
            background: var(--primary-bright);
            transform: translateY(-2px);
            box-shadow: 0 10px 30px rgba(34, 197, 94, 0.4);
        }

        .btn-submit:disabled {
            background: #444;
            color: #888;
            cursor: not-allowed;
            transform: none;
        }

        /* ==================== MODALS (IMPROVED) ==================== */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.95);
            backdrop-filter: blur(10px);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 3000;
            opacity: 0;
            transition: opacity 0.3s;
            overflow-y: auto;
            padding: 20px;
        }

        .modal-overlay.active {
            display: flex;
            opacity: 1;
        }

        .modal-content {
            background: linear-gradient(135deg, rgba(15, 18, 25, 0.95) 0%, rgba(10, 12, 16, 0.95) 100%);
            max-width: 900px;
            width: 100%;
            max-height: 90vh;
            overflow-y: auto;
            padding: 50px;
            border-radius: 30px;
            border: 2px solid var(--glass-border);
            position: relative;
            box-shadow: 0 0 80px rgba(34, 197, 94, 0.2);
            animation: modalSlideIn 0.4s ease;
        }

        @keyframes modalSlideIn {
            from {
                opacity: 0;
                transform: translateY(-50px) scale(0.9);
            }
            to {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }

        .modal-close {
            position: absolute;
            top: 25px;
            right: 30px;
            font-size: 36px;
            color: var(--text-gray);
            cursor: pointer;
            transition: 0.3s;
            line-height: 1;
            width: 45px;
            height: 45px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.05);
        }

        .modal-close:hover {
            transform: rotate(90deg);
            color: var(--danger);
            background: rgba(239, 68, 68, 0.1);
        }

        .modal-title {
            font-size: 32px;
            font-weight: 900;
            text-align: center;
            margin-bottom: 30px;
            background: linear-gradient(135deg, var(--primary-bright), var(--primary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            text-transform: uppercase;
            letter-spacing: 2px;
        }

        .inner-block {
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid var(--glass-border);
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 25px;
            transition: 0.3s;
        }

        .inner-block:hover {
            border-color: rgba(34, 197, 94, 0.3);
            background: rgba(34, 197, 94, 0.05);
        }

        .inner-block h3 {
            color: var(--primary-bright);
            font-size: 18px;
            font-weight: 800;
            margin-bottom: 15px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .list {
            list-style: none;
            padding: 0;
        }

        .list li {
            display: flex;
            gap: 15px;
            margin-bottom: 12px;
            font-size: 15px;
            color: #cbd5e1;
            line-height: 1.6;
        }

        .list li b {
            color: var(--primary-bright);
            min-width: 25px;
            font-weight: 800;
        }

        /* AUTH MODAL */
        .auth-modal {
            max-width: 500px;
        }

        .auth-toggle {
            display: flex;
            gap: 10px;
            margin-bottom: 30px;
            background: rgba(0,0,0,0.3);
            padding: 6px;
            border-radius: 12px;
        }

        .auth-tab {
            flex: 1;
            padding: 12px;
            background: transparent;
            border: none;
            color: var(--text-gray);
            font-weight: 700;
            font-size: 14px;
            border-radius: 8px;
            cursor: pointer;
            transition: 0.3s;
        }

        .auth-tab.active {
            background: var(--primary);
            color: black;
        }

        .auth-fields {
            display: none;
        }

        .auth-fields.active {
            display: block;
        }

        .error-msg {
            background: rgba(239, 68, 68, 0.1);
            border: 1px solid rgba(239, 68, 68, 0.3);
            padding: 12px;
            border-radius: 10px;
            color: var(--danger);
            font-size: 13px;
            margin-top: 15px;
            display: none;
        }

        .error-msg.active {
            display: block;
        }

        /* ==================== NEWS PREVIEW ==================== */
        .news-preview-section {
            margin-top: 30px;
            padding-top: 30px;
            border-top: 2px solid var(--glass-border);
        }

        .news-preview-card {
            background: var(--card-bg);
            backdrop-filter: blur(15px);
            border: 2px solid var(--primary);
            border-radius: 24px;
            overflow: hidden;
            box-shadow: 0 10px 40px rgba(34, 197, 94, 0.2);
        }

        .news-preview-image {
            width: 100%;
            height: 250px;
            overflow: hidden;
            background: rgba(0,0,0,0.5);
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--text-dim);
        }

        .news-preview-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .news-preview-content {
            padding: 25px;
        }

        .news-preview-title {
            font-size: 22px;
            font-weight: 800;
            color: white;
            margin-bottom: 15px;
            line-height: 1.3;
        }

        .news-preview-description {
            font-size: 15px;
            color: var(--text-gray);
            line-height: 1.8;
            margin-bottom: 15px;
        }

        .news-preview-footer {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding-top: 15px;
            border-top: 1px solid rgba(255,255,255,0.1);
        }

        .news-preview-date {
            font-size: 13px;
            color: var(--text-dim);
            font-weight: 600;
        }

        .news-preview-link {
            color: var(--primary-bright);
            font-size: 14px;
            font-weight: 700;
        }

        /* ==================== ADMIN PANELS ==================== */
        .admin-sections {
            display: flex;
            flex-direction: column;
            gap: 25px;
        }

        .admin-photo-selector {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
            gap: 12px;
            margin-top: 15px;
            max-height: 300px;
            overflow-y: auto;
            padding: 10px;
            background: rgba(0,0,0,0.2);
            border-radius: 12px;
        }

        .admin-photo-item {
            aspect-ratio: 1;
            border-radius: 10px;
            overflow: hidden;
            cursor: pointer;
            border: 2px solid transparent;
            transition: all 0.3s;
            position: relative;
        }

        .admin-photo-item img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .admin-photo-item:hover {
            border-color: var(--primary-bright);
            transform: scale(1.05);
        }

        .admin-photo-item.selected {
            border-color: var(--primary);
            box-shadow: 0 0 20px rgba(34, 197, 94, 0.6);
        }

        .admin-photo-item.selected::after {
            content: '✓';
            position: absolute;
            top: 5px;
            right: 5px;
            background: var(--primary);
            color: black;
            width: 25px;
            height: 25px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 900;
            font-size: 16px;
        }

        /* ==================== LINKS MANAGER ==================== */
        .links-container {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .link-item {
            background: var(--card-bg);
            border: 2px solid var(--glass-border);
            border-radius: 20px;
            padding: 25px;
            transition: all 0.3s;
        }

        .link-item.working {
            border-color: var(--primary);
            background: rgba(34, 197, 94, 0.05);
        }

        .link-item.broken {
            border-color: var(--danger);
            background: rgba(239, 68, 68, 0.05);
        }

        .link-item.checking {
            border-color: #fbbf24;
            background: rgba(251, 191, 36, 0.05);
        }

        .link-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .link-title {
            font-size: 16px;
            font-weight: 800;
            color: white;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .link-status {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 6px 14px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 700;
        }

        .link-status.working {
            background: rgba(34, 197, 94, 0.2);
            color: var(--primary-bright);
        }

        .link-status.broken {
            background: rgba(239, 68, 68, 0.2);
            color: var(--danger);
        }

        .link-status.checking {
            background: rgba(251, 191, 36, 0.2);
            color: #fbbf24;
        }

        .link-status-icon {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            animation: pulse 2s infinite;
        }

        .link-status.working .link-status-icon {
            background: var(--primary);
        }

        .link-status.broken .link-status-icon {
            background: var(--danger);
        }

        .link-status.checking .link-status-icon {
            background: #fbbf24;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        .link-input-group {
            display: flex;
            gap: 10px;
            align-items: center;
        }

        .link-input {
            flex: 1;
            padding: 12px 16px;
            background: rgba(0,0,0,0.3);
            border: 1px solid rgba(255,255,255,0.1);
            color: white;
            border-radius: 10px;
            font-size: 14px;
            outline: none;
            transition: 0.3s;
            font-family: 'Courier New', monospace;
        }

        .link-input:focus {
            border-color: var(--primary);
            background: rgba(0,0,0,0.5);
        }

        .link-btn {
            padding: 10px 20px;
            background: var(--primary);
            color: black;
            border: none;
            border-radius: 10px;
            font-weight: 700;
            font-size: 13px;
            cursor: pointer;
            transition: 0.3s;
            white-space: nowrap;
        }

        .link-btn:hover {
            background: var(--primary-bright);
            transform: scale(1.05);
        }

        .link-btn.secondary {
            background: rgba(255,255,255,0.1);
            color: white;
        }

        .link-btn.secondary:hover {
            background: rgba(255,255,255,0.2);
        }

        .link-info {
            margin-top: 10px;
            padding-top: 10px;
            border-top: 1px solid rgba(255,255,255,0.05);
            font-size: 12px;
            color: var(--text-dim);
        }

        /* ==================== FOOTER ==================== */
        .footer {
            background: var(--bg-secondary);
            padding: 60px 6% 30px;
            border-top: 1px solid var(--glass-border);
            overflow: hidden;
        }

        .footer-container {
            max-width: 1200px;
            margin: 0 auto;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 40px;
        }

        .footer-socials {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 20px;
        }

        .social-link {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 12px;
            padding: 20px;
            background: var(--card-bg);
            border: 1px solid var(--glass-border);
            border-radius: 20px;
            color: white;
            text-decoration: none;
            transition: all 0.3s;
            min-width: 120px;
        }

        .social-link:hover {
            transform: translateY(-5px);
            border-color: var(--primary);
            box-shadow: 0 10px 30px rgba(34, 197, 94, 0.2);
            background: rgba(34, 197, 94, 0.05);
        }

        .social-link svg {
            width: 40px;
            height: 40px;
            transition: 0.3s;
        }

        .social-link:hover svg {
            color: var(--primary-bright);
        }

        .social-link span {
            font-size: 14px;
            font-weight: 600;
            color: var(--text-gray);
            transition: 0.3s;
        }

        .social-link:hover span {
            color: var(--primary-bright);
        }

        .footer-tags {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 15px;
        }

        .footer-tag {
            background: rgba(34, 197, 94, 0.1);
            border: 1px solid var(--glass-border);
            padding: 10px 20px;
            border-radius: 25px;
            font-size: 14px;
            font-weight: 700;
            color: var(--primary-bright);
            transition: 0.3s;
        }

        .footer-tag:hover {
            background: rgba(34, 197, 94, 0.2);
            border-color: var(--primary);
            transform: scale(1.05);
        }

        .footer-copyright {
            text-align: center;
            padding-top: 30px;
            border-top: 1px solid rgba(255, 255, 255, 0.05);
            width: 100%;
        }

        .footer-copyright p {
            font-size: 14px;
            color: var(--text-dim);
            font-weight: 500;
        }

        /* ==================== RESPONSIVE ==================== */
        @media (max-width: 1024px) {
            .why-card, .why-card-reverse { 
                grid-template-columns: 1fr; 
                padding: 35px; 
                gap: 25px; 
            }
            .why-card-reverse .why-content, 
            .why-card-reverse .why-image { 
                order: unset; 
            }
            .why-image { height: 280px; }
            .why-title { font-size: 26px; }
            .gallery-main-image { height: 450px; }
            .news-grid { grid-template-columns: repeat(2, 1fr); }
        }

        @media (max-width: 768px) {
            nav { padding: 15px 5%; }
            .hero { padding: 90px 5% 50px; }
            .hero-title { font-size: clamp(32px, 9vw, 52px); }
            .hero-subtitle { font-size: 13px; letter-spacing: 2px; }
            .hero-description { font-size: 15px; }
            .hero-badge { font-size: 12px; padding: 10px 18px; }
            .hero-stats { grid-template-columns: repeat(3, 1fr); gap: 12px; }
            .stat-card { padding: 18px 12px; }
            .stat-value { font-size: 28px; }
            .stat-highlight { font-size: 18px; }
            .section { padding: 60px 5%; }
            .why-section { padding: 60px 5%; }
            .gallery-section { padding: 60px 5%; }
            .form-section { padding: 60px 5%; }
            .news-section { padding: 60px 5%; }
            .section-title { font-size: clamp(26px, 7vw, 40px); }
            .section-subtitle { font-size: 15px; }
            .why-card, .why-card-reverse { 
                grid-template-columns: 1fr; 
                padding: 25px 20px; 
                gap: 20px; 
            }
            .why-image { height: 220px; }
            .why-title { font-size: 20px; }
            .why-text { font-size: 14px; }
            .aircraft-tags { gap: 8px; }
            .aircraft-tag { font-size: 12px; padding: 6px 12px; }
            .features-grid { 
                grid-template-columns: 1fr 1fr; 
                gap: 15px; 
            }
            .feature-card { padding: 25px 18px; }
            .feature-title { font-size: 16px; }
            .feature-text { font-size: 13px; }
            .feature-icon { font-size: 28px; margin-bottom: 14px; }
            .gallery-main-image { height: 260px; }
            .gallery-nav-btn { width: 40px; height: 40px; }
            .gallery-prev { left: 8px; }
            .gallery-next { right: 8px; }
            .gallery-main-info { padding: 18px; }
            .gallery-main-caption { font-size: 15px; }
            .gallery-thumbnails { 
                grid-template-columns: repeat(auto-fill, minmax(75px, 1fr)); 
                gap: 8px; 
            }
            .gallery-main-viewer { border-radius: 18px; }
            .news-grid { grid-template-columns: 1fr; }
            .news-image { height: 180px; }
            .news-title { font-size: 17px; }
            .form-container { 
                padding: 25px 20px; 
                border-radius: 20px; 
            }
            .form-input, .form-textarea { 
                padding: 15px; 
                font-size: 14px; 
            }
            .modal-content { 
                padding: 25px 20px; 
                border-radius: 20px; 
                max-height: 85vh; 
            }
            .modal-title { 
                font-size: 20px; 
                letter-spacing: 1px; 
            }
            .modal-close { 
                font-size: 28px; 
                top: 18px; 
                right: 20px; 
            }
            .inner-block { padding: 20px; }
            .auth-modal { max-width: 100%; }
            .footer { padding: 40px 5% 20px; }
            .footer-socials { gap: 12px; }
            .social-link { 
                min-width: 80px; 
                padding: 14px 10px; 
                gap: 8px; 
            }
            .social-link svg { 
                width: 28px; 
                height: 28px; 
            }
            .social-link span { font-size: 11px; }
            .footer-tag { 
                font-size: 12px; 
                padding: 8px 14px; 
            }
            .link-input-group { flex-wrap: wrap; }
            .admin-photo-selector { 
                grid-template-columns: repeat(auto-fill, minmax(80px, 1fr)); 
            }
        }

        @media (max-width: 480px) {
            .hero-stats { 
                grid-template-columns: 1fr; 
                gap: 10px; 
            }
            .stat-card { 
                display: flex; 
                align-items: center; 
                justify-content: space-between; 
                padding: 16px 20px; 
            }
            .stat-label { 
                margin-bottom: 0; 
                font-size: 12px; 
            }
            .stat-value { font-size: 24px; }
            .features-grid { grid-template-columns: 1fr; }
            .gallery-main-image { height: 200px; }
            .why-section .section-title { font-size: 22px; }
            .why-badge { 
                font-size: 10px; 
                padding: 6px 14px; 
            }
            .why-title { font-size: 18px; }
            .why-image { height: 180px; }
            .footer-socials { 
                display: grid; 
                grid-template-columns: repeat(3, 1fr); 
                gap: 10px; 
            }
            .social-link { min-width: unset; }
            .gallery-nav-btn { 
                width: 34px; 
                height: 34px; 
            }
            .modal-content { padding: 20px 15px; }
            .inner-block { padding: 15px; }
        }

        /* ==================== ANIMATIONS ==================== */
        [data-aos] {
            opacity: 0;
            transition: opacity 0.6s ease, transform 0.6s ease;
        }

        [data-aos].aos-animate {
            opacity: 1;
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateX(100px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        /* Fix for overflow issues */
        * {
            max-width: 100%;
        }

        img, video, iframe {
            max-width: 100%;
            height: auto;
        }
    </style>
</head>
<body>

    <!-- NAVIGATION -->
    <nav id="mainNav">
        <a href="index.html" class="logo">
            <div class="logo-box">ДШВ</div>
            <strong>UKRAINE GTA</strong>
        </a>
        
        <div class="burger" id="burgerBtn" onclick="toggleMenu()">
            <span></span>
            <span></span>
            <span></span>
        </div>
        
        <div class="nav-links" id="navLinks">
            <a class="nav-link" onclick="openModal('aboutModal'); toggleMenu()">Про нас</a>
            <a class="nav-link" onclick="openModal('reqModal'); toggleMenu()">Вимоги</a>
            <a href="gallery.html" class="nav-link">Галерея</a>
            <a href="https://ukraine-gta.com.ua/uk/" target="_blank" class="nav-link">Проєкт</a>
            
            <!-- Admin Dropdown (only visible to admins) -->
            <div class="admin-dropdown" id="adminDropdown" style="display: none;">
                <div class="admin-dropdown-btn">
                    ⚙️ Адмін панель
                    <svg width="12" height="12" viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M3 4.5L6 7.5L9 4.5" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                    </svg>
                </div>
                <div class="admin-dropdown-content">
                    <div class="admin-dropdown-item" onclick="openAdminPanel(); toggleMenu()">
                        🖼️ Налаштування фото
                    </div>
                    <div class="admin-dropdown-item" onclick="openNewsEditor(); toggleMenu()">
                        📰 Управління новинами
                    </div>
                    <div class="admin-dropdown-item" onclick="openLinksManager(); toggleMenu()">
                        🔗 Управління посиланнями
                    </div>
                </div>
            </div>

            <a class="btn-primary btn-outline" id="cabinetBtn" onclick="handleCabinetClick()">Кабінет</a>
            <a href="#join" class="btn-primary" onclick="toggleMenu()">Вступити</a>
        </div>
    </nav>

    <!-- HERO SECTION -->
    <section class="hero">
        <div class="hero-bg"></div>
        <div class="hero-content">
            <div class="hero-badge" data-aos="fade-down">
                🛡️ Елітний підрозділ ЗСУ
            </div>
            
            <h1 class="hero-title" data-aos="fade-up">
                Десантно Штурмові<br>Війська
            </h1>
            
            <p class="hero-subtitle" data-aos="fade-up" data-aos-delay="100">
                ДШВ — ЗАВЖДИ ПЕРШІ!
            </p>
            
            <p class="hero-description" data-aos="fade-up" data-aos-delay="200">
                Ми - елітний підрозділ ЗСУ в світі Ukraine GTA. Наша місія - виконувати найскладніші бойові завдання, захищати мирних громадян та підтримувати правопорядок в повітрі та на землі.
            </p>

            <!-- STATS -->
            <div class="hero-stats" data-aos="fade-up" data-aos-delay="300">
                <div class="stat-card">
                    <div class="stat-label">Кількість бійців</div>
                    <div class="stat-value loading" id="loadingCircle"></div>
                    <div class="stat-value" id="fightersCount" style="display:none;">0</div>
                </div>
                
                <div class="stat-card">
                    <div class="stat-label">Роки досвіду</div>
                    <div class="stat-value">3</div>
                </div>
                
                <div class="stat-card">
                    <div class="stat-label">Робота</div>
                    <div class="stat-value stat-highlight">ЕЛІТНА</div>
                </div>
            </div>
        </div>
    </section>

    <!-- WHY SECTION -->
    <section class="why-section">
        <div class="section-header" data-aos="fade-up">
            <h2 class="section-title" style="text-align: center;">
                ЧОМУ САМЕ В <span style="color: var(--primary);">ДШВ</span>
            </h2>
        </div>

        <div class="why-grid">
            <!-- Fact 1 -->
            <div class="why-card why-card-large" data-aos="fade-right">
                <div class="why-content">
                    <div class="why-badge">Перший факт</div>
                    <h3 class="why-title">УНІКАЛЬНИЙ ВЕБСАЙТ</h3>
                    <p class="why-text">
                        Наш підрозділ є єдиним, що має власний вебсайт із унікальною інфраструктурою: персональною галереєю, 
                        системою рулетки, особистим кабінетом та багатьма іншими функціями, створеними для зручності та розвитку 
                        особового складу.
                    </p>
                </div>
                <div class="why-image" id="whyImage1">
                    <!-- Dynamic image loaded from gallery -->
                </div>
            </div>

            <!-- Fact 2 -->
            <div class="why-card why-card-large why-card-reverse" data-aos="fade-left">
                <div class="why-content">
                    <div class="why-badge">Другий факт</div>
                    <h3 class="why-title">АВІАЦІЙНИЙ ПАРК</h3>
                    <p class="why-text">
                        Наш підрозділ є єдиним, що має можливість використовувати авіацію різних типів, зокрема: F-16, МіГ-29, 
                        Мі-24 та Мі-8.
                    </p>
                    <div class="aircraft-tags">
                        <span class="aircraft-tag">🛩️ F-16</span>
                        <span class="aircraft-tag">✈️ МіГ-29</span>
                        <span class="aircraft-tag">🚁 Мі-24</span>
                        <span class="aircraft-tag">🚁 Мі-8</span>
                    </div>
                </div>
                <div class="why-image" id="whyImage2">
                    <!-- Dynamic image loaded from gallery -->
                </div>
            </div>

            <!-- Fact 3 -->
            <div class="why-card why-card-large" data-aos="fade-right">
                <div class="why-content">
                    <div class="why-badge">Третій факт</div>
                    <h3 class="why-title">ДОСВІДЧЕНІ ІНСТРУКТОРИ</h3>
                    <p class="why-text">
                        Інструкторський склад підрозділу постійно перебуває на зв'язку та завжди готовий надати допомогу. 
                        Вони регулярно проводять Код-5, а також організовують цікаві та пізнавальні спеціальні завдання для 
                        підвищення рівня підготовки бійців.
                    </p>
                </div>
                <div class="why-image" id="whyImage3">
                    <!-- Dynamic image loaded from gallery -->
                </div>
            </div>
        </div>
    </section>

    <!-- FEATURES -->
    <section class="section">
        <div class="section-header" data-aos="fade-up">
            <h2 class="section-title">Чому обрати нас?</h2>
            <p class="section-subtitle">Приєднуйся до найкращого підрозділу та отримай унікальний досвід</p>
        </div>

        <div class="features-grid">
            <div class="feature-card" data-aos="fade-up">
                <div class="feature-icon">🎓</div>
                <h3 class="feature-title">Професійна підготовка</h3>
                <p class="feature-text">Курс військової та тактичної підготовки від досвідчених інструкторів.</p>
            </div>

            <div class="feature-card" data-aos="fade-up" data-aos-delay="100">
                <div class="feature-icon">🛡️</div>
                <h3 class="feature-title">Сучасне спорядження</h3>
                <p class="feature-text">Доступ до найкращої зброї та винищувачів F-16.</p>
            </div>

            <div class="feature-card" data-aos="fade-up" data-aos-delay="200">
                <div class="feature-icon">👥</div>
                <h3 class="feature-title">Бойове братство</h3>
                <p class="feature-text">Станьте частиною команди професіоналів.</p>
            </div>

            <div class="feature-card" data-aos="fade-up">
                <div class="feature-icon">📈</div>
                <h3 class="feature-title">Кар'єрний ріст</h3>
                <p class="feature-text">Реальна можливість швидкого просування по службі.</p>
            </div>

            <div class="feature-card" data-aos="fade-up" data-aos-delay="100">
                <div class="feature-icon">🎯</div>
                <h3 class="feature-title">Реальні операції</h3>
                <p class="feature-text">Участь у наймасштабніших спецзавданнях.</p>
            </div>

            <div class="feature-card" data-aos="fade-up" data-aos-delay="200">
                <div class="feature-icon">💰</div>
                <h3 class="feature-title">Гідна винагорода</h3>
                <p class="feature-text">Високі виплати за успішне виконання місій.</p>
            </div>
        </div>
    </section>

    <!-- GALLERY PREVIEW -->
    <section class="gallery-section">
        <div class="section-header" data-aos="fade-up">
            <h2 class="section-title">Наші найкращі моменти</h2>
            <p class="section-subtitle">Переглянь фотографії наших операцій та тренувань</p>
        </div>

        <!-- Main Gallery Viewer -->
        <div class="gallery-main-viewer" id="galleryMainViewer" data-aos="fade-up">
            <button class="gallery-nav-btn gallery-prev" onclick="changeMainPhoto(-1)">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M15 18L9 12L15 6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
            </button>
            
            <div class="gallery-main-image" id="galleryMainImage">
                <!-- Main photo will be loaded here -->
            </div>
            
            <button class="gallery-nav-btn gallery-next" onclick="changeMainPhoto(1)">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M9 18L15 12L9 6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
            </button>

            <div class="gallery-main-info">
                <div class="gallery-main-caption" id="galleryMainCaption">Завантаження...</div>
                <div class="gallery-main-meta">
                    <span id="galleryMainAuthor"></span>
                    <span id="galleryMainCounter"></span>
                </div>
            </div>
        </div>

        <!-- Thumbnails -->
        <div class="gallery-thumbnails" id="galleryThumbnails" data-aos="fade-up">
            <!-- Thumbnails will be loaded here -->
        </div>

        <div style="text-align: center; margin-top: 50px;" data-aos="fade-up">
            <a href="gallery.html" class="btn-primary">Переглянути всю галерею</a>
        </div>
    </section>

    <!-- NEWS SECTION -->
    <section class="section news-section">
        <div class="section-header" data-aos="fade-up">
            <h2 class="section-title">НОВИНИ <span style="color: var(--primary);">ПІДРОЗДІЛУ</span></h2>
            <p class="section-subtitle">Останні події та оновлення підрозділу</p>
        </div>

        <div class="news-grid" id="newsGrid">
            <!-- News will be loaded here -->
        </div>
    </section>

    <!-- APPLICATION FORM -->
    <section id="join" class="form-section">
        <div class="section-header" data-aos="fade-up">
            <h2 class="section-title">Подати рапорт на вступ</h2>
            <p class="section-subtitle">Заповни форму та стань частиною нашої команди</p>
        </div>

        <div class="form-container" data-aos="zoom-in">
            <form id="applicationForm">
                <input type="text" id="appName" class="form-input" placeholder="Ваш NickName" required>
                <input type="number" id="appAge" class="form-input" placeholder="Ваш реальний вік" required>
                <input type="text" id="appRank" class="form-input" placeholder="Яке ваше звання?" required>
                <input type="text" id="appDiscord" class="form-input" placeholder="Ваш Discord" required>
                <textarea id="appMotivation" class="form-textarea" placeholder="Ваша мотивація (чому ви хочете до ДШВ)..." required></textarea>
                <button type="submit" id="appSubmitBtn" class="btn-submit">Відправити рапорт</button>
            </form>
        </div>
    </section>

    <!-- FOOTER -->
    <footer class="footer">
        <div class="footer-container">
            <!-- Social Links -->
            <div class="footer-socials" data-aos="fade-up">
                <a href="https://discord.gg/ukrainegta" target="_blank" class="social-link" rel="nofollow">
                    <svg width="40" height="40" viewBox="0 0 71 55" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <g clip-path="url(#clip0)">
                            <path d="M60.1045 4.8978C55.5792 2.8214 50.7265 1.2916 45.6527 0.41542C45.5603 0.39851 45.468 0.440769 45.4204 0.525289C44.7963 1.6353 44.105 3.0834 43.6209 4.2216C38.1637 3.4046 32.7345 3.4046 27.3892 4.2216C26.905 3.0581 26.1886 1.6353 25.5617 0.525289C25.5141 0.443589 25.4218 0.40133 25.3294 0.41542C20.2584 1.2888 15.4057 2.8186 10.8776 4.8978C10.8384 4.9147 10.8048 4.9429 10.7825 4.9795C1.57795 18.7309 -0.943561 32.1443 0.293408 45.3914C0.299005 45.4562 0.335386 45.5182 0.385761 45.5576C6.45866 50.0174 12.3413 52.7249 18.1147 54.5195C18.2071 54.5477 18.305 54.5139 18.3638 54.4378C19.7295 52.5728 20.9469 50.6063 21.9907 48.5383C22.0523 48.4172 21.9935 48.2735 21.8676 48.2256C19.9366 47.4931 18.0979 46.6 16.3292 45.5858C16.1893 45.5041 16.1781 45.304 16.3068 45.2082C16.679 44.9293 17.0513 44.6391 17.4067 44.3461C17.471 44.2926 17.5606 44.2813 17.6362 44.3151C29.2558 49.6202 41.8354 49.6202 53.3179 44.3151C53.3935 44.2785 53.4831 44.2898 53.5502 44.3433C53.9057 44.6363 54.2779 44.9293 54.6529 45.2082C54.7816 45.304 54.7732 45.5041 54.6333 45.5858C52.8646 46.6197 51.0259 47.4931 49.0921 48.2228C48.9662 48.2707 48.9102 48.4172 48.9718 48.5383C50.038 50.6034 51.2554 52.5699 52.5959 54.435C52.6519 54.5139 52.7526 54.5477 52.845 54.5195C58.6464 52.7249 64.529 50.0174 70.6019 45.5576C70.6551 45.5182 70.6887 45.459 70.6943 45.3942C72.1747 30.0791 68.2147 16.7757 60.1968 4.9823C60.1772 4.9429 60.1437 4.9147 60.1045 4.8978ZM23.7259 37.3253C20.2276 37.3253 17.3451 34.1136 17.3451 30.1693C17.3451 26.225 20.1717 23.0133 23.7259 23.0133C27.308 23.0133 30.1626 26.2532 30.1066 30.1693C30.1066 34.1136 27.28 37.3253 23.7259 37.3253ZM47.3178 37.3253C43.8196 37.3253 40.9371 34.1136 40.9371 30.1693C40.9371 26.225 43.7636 23.0133 47.3178 23.0133C50.9 23.0133 53.7545 26.2532 53.6986 30.1693C53.6986 34.1136 50.9 37.3253 47.3178 37.3253Z" fill="currentColor"/>
                        </g>
                    </svg>
                    <span>Discord</span>
                </a>

                <a href="https://www.instagram.com/ukraine_gta" target="_blank" class="social-link" rel="nofollow">
                    <svg width="40" height="40" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z" fill="currentColor"/>
                    </svg>
                    <span>Instagram</span>
                </a>

                <a href="https://www.youtube.com/channel/UCAyONHpqibQDDrCxGiYc_hQ" target="_blank" class="social-link" rel="nofollow">
                    <svg width="40" height="40" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M23.498 6.186a3.016 3.016 0 0 0-2.122-2.136C19.505 3.545 12 3.545 12 3.545s-7.505 0-9.377.505A3.017 3.017 0 0 0 .502 6.186C0 8.07 0 12 0 12s0 3.93.502 5.814a3.016 3.016 0 0 0 2.122 2.136c1.871.505 9.376.505 9.376.505s7.505 0 9.377-.505a3.015 3.015 0 0 0 2.122-2.136C24 15.93 24 12 24 12s0-3.93-.502-5.814zM9.545 15.568V8.432L15.818 12l-6.273 3.568z" fill="currentColor"/>
                    </svg>
                    <span>YouTube</span>
                </a>

                <a href="https://www.tiktok.com/@ukraine_gta" target="_blank" class="social-link" rel="nofollow">
                    <svg width="40" height="40" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M19.59 6.69a4.83 4.83 0 0 1-3.77-4.25V2h-3.45v13.67a2.89 2.89 0 0 1-5.2 1.74 2.89 2.89 0 0 1 2.31-4.64 2.93 2.93 0 0 1 .88.13V9.4a6.84 6.84 0 0 0-1-.05A6.33 6.33 0 0 0 5 20.1a6.34 6.34 0 0 0 10.86-4.43v-7a8.16 8.16 0 0 0 4.77 1.52v-3.4a4.85 4.85 0 0 1-1-.1z" fill="currentColor"/>
                    </svg>
                    <span>TikTok</span>
                </a>

                <a href="https://t.me/ukraine_gta" target="_blank" class="social-link" rel="nofollow">
                    <svg width="40" height="40" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M11.944 0A12 12 0 0 0 0 12a12 12 0 0 0 12 12 12 12 0 0 0 12-12A12 12 0 0 0 12 0a12 12 0 0 0-.056 0zm4.962 7.224c.1-.002.321.023.465.14a.506.506 0 0 1 .171.325c.016.093.036.306.02.472-.18 1.898-.962 6.502-1.36 8.627-.168.9-.499 1.201-.82 1.23-.696.065-1.225-.46-1.9-.902-1.056-.693-1.653-1.124-2.678-1.8-1.185-.78-.417-1.21.258-1.91.177-.184 3.247-2.977 3.307-3.23.007-.032.014-.15-.056-.212s-.174-.041-.249-.024c-.106.024-1.793 1.14-5.061 3.345-.48.33-.913.49-1.302.48-.428-.008-1.252-.241-1.865-.44-.752-.245-1.349-.374-1.297-.789.027-.216.325-.437.893-.663 3.498-1.524 5.83-2.529 6.998-3.014 3.332-1.386 4.025-1.627 4.476-1.635z" fill="currentColor"/>
                    </svg>
                    <span>Telegram</span>
                </a>
            </div>

            <!-- Tags -->
            <div class="footer-tags" data-aos="fade-up" data-aos-delay="100">
                <span class="footer-tag">ДШВ</span>
                <span class="footer-tag">UKRAINE GTA</span>
                <span class="footer-tag">Центральна Україна</span>
                <span class="footer-tag">ЗСУ</span>
            </div>

            <!-- Copyright -->
            <div class="footer-copyright" data-aos="fade-up" data-aos-delay="200">
                <p>Усі права захищені © 2022 - 2026 UKRAINE GTA</p>
            </div>
        </div>
    </footer>

    <!-- ABOUT MODAL -->
    <div class="modal-overlay" id="aboutModal">
        <div class="modal-content">
            <span class="modal-close" onclick="closeModal('aboutModal')">&times;</span>
            <h2 class="modal-title">Завдання та можливості</h2>
            
            <div class="inner-block">
                <h3>🛡️ Завдання ДШВ:</h3>
                <ul class="list">
                    <li><b>1</b> Патруль всіх міст на автомобілі.</li>
                    <li><b>2</b> Повітряний патруль на гвинтокрилі.</li>
                    <li><b>3</b> Повітряний патруль на винищувачах.</li>
                    <li><b>4</b> Протиповітряна оборона ВЧ.</li>
                    <li><b>5</b> Десантування та штурм будівель.</li>
                    <li><b>6</b> Розвідка та диверсії в тилу ворога.</li>
                    <li><b>7</b> Боротьба з ворожим десантом та угруповуваннями.</li>
                    <li><b>8</b> Спец.Операцій в повітрі.</li>
                    <li><b>9</b> Підтримка сухопутних військ у повітрі.</li>
                </ul>
            </div>

            <div class="inner-block">
                <h3>🚀 Від нас:</h3>
                <ul class="list">
                    <li><b>+</b> Можливість патрулю на винищувачах F-16 та Міг-29.</li>
                    <li><b>+</b> Можливість патрулю на гвинтокрилах МІ-8 та Мі-24.</li>
                    <li><b>+</b> Карʼєрний зріст в підрозділі.</li>
                    <li><b>+</b> Цікаві та пізнавальні тренування.</li>
                    <li><b>+</b> Легку систему підвищення.</li>
                    <li><b>+</b> Розіграші, конкурси та МП.</li>
                    <li><b>+</b> Система грошових винагород.</li>
                    <li><b>+</b> Можливість отримати до 1.850.000 за фігури вищого пілотажу.</li>
                </ul>
            </div>
        </div>
    </div>

    <!-- REQUIREMENTS MODAL -->
    <div class="modal-overlay" id="reqModal">
        <div class="modal-content">
            <span class="modal-close" onclick="closeModal('reqModal')">&times;</span>
            <h2 class="modal-title">Вимоги до кандидатів</h2>
            
            <div class="inner-block" style="text-align:center;">
                <ul class="list" style="display:inline-block; font-size: 18px; line-height: 2.2;">
                    <li>🟢 Мінімальний вік 14+ <span style="font-size:12px; opacity:0.7;">(бувають виключення)</span></li>
                    <li>🟢 Бути у фракції ЗСУ</li>
                    <li>🟢 Мати звання Ст.Солдат [3]</li>
                    <li>🟢 Наявність робочого мікрофона</li>
                    <li>🟢 Адекватність та дисциплінованість</li>
                    <li>🟢 Знання статуту ЗСУ та кодексів</li>
                    <li>🟢 Розуміння RP-процесу</li>
                </ul>
            </div>
        </div>
    </div>

    <!-- AUTH MODAL -->
    <div class="modal-overlay" id="authModal">
        <div class="modal-content auth-modal">
            <span class="modal-close" onclick="closeModal('authModal')">&times;</span>
            
            <div class="auth-toggle">
                <button class="auth-tab active" onclick="switchAuthTab('login')">Вхід</button>
                <button class="auth-tab" onclick="switchAuthTab('register')">Реєстрація</button>
            </div>

            <!-- LOGIN FORM -->
            <div class="auth-fields active" id="loginFields">
                <h2 class="modal-title" style="font-size: 24px;">Вхід в кабінет</h2>
                <form id="loginForm">
                    <input type="email" id="loginEmail" class="form-input" placeholder="Електронна пошта" required>
                    <input type="password" id="loginPassword" class="form-input" placeholder="Пароль" required>
                    <button type="submit" class="btn-submit">Увійти</button>
                    <div class="error-msg" id="loginError"></div>
                </form>
            </div>

            <!-- REGISTER FORM -->
            <div class="auth-fields" id="registerFields">
                <h2 class="modal-title" style="font-size: 24px;">Створення акаунту</h2>
                <form id="registerForm">
                    <input type="email" id="regEmail" class="form-input" placeholder="Електронна пошта" required>
                    <input type="password" id="regPassword" class="form-input" placeholder="Пароль" required>
                    <input type="text" id="regName" class="form-input" placeholder="Ваш NickName" required>
                    <input type="text" id="regRank" class="form-input" placeholder="Ваше звання">
                    <input type="text" id="regPos" class="form-input" placeholder="Ваша посада">
                    <input type="number" id="regGameID" class="form-input" placeholder="ID гравця">
                    <input type="text" id="regDiscord" class="form-input" placeholder="Discord">
                    <button type="submit" class="btn-submit">Зареєструватися</button>
                    <div class="error-msg" id="registerError"></div>
                </form>
            </div>
        </div>
    </div>

    <!-- ADMIN PANEL MODAL -->
    <div class="modal-overlay" id="adminPanel">
        <div class="modal-content">
            <span class="modal-close" onclick="closeModal('adminPanel')">&times;</span>
            <h2 class="modal-title">🛠️ Панель адміністратора</h2>
            <p style="text-align: center; color: var(--text-gray); margin-bottom: 30px;">
                Оберіть фото з галереї для відображення в секції "Чому варто грати"
            </p>

            <div class="admin-sections">
                <!-- Fact 1 -->
                <div class="inner-block">
                    <h3>📌 Факт 1 - Унікальний вебсайт</h3>
                    <div class="admin-photo-selector" id="adminSelector1">
                        <!-- Photos will be loaded here -->
                    </div>
                </div>

                <!-- Fact 2 -->
                <div class="inner-block">
                    <h3>📌 Факт 2 - Авіаційний парк</h3>
                    <div class="admin-photo-selector" id="adminSelector2">
                        <!-- Photos will be loaded here -->
                    </div>
                </div>

                <!-- Fact 3 -->
                <div class="inner-block">
                    <h3>📌 Факт 3 - Досвідчені інструктори</h3>
                    <div class="admin-photo-selector" id="adminSelector3">
                        <!-- Photos will be loaded here -->
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- NEWS EDITOR MODAL (WITH PREVIEW) -->
    <div class="modal-overlay" id="newsEditorModal">
        <div class="modal-content">
            <span class="modal-close" onclick="closeModal('newsEditorModal')">&times;</span>
            <h2 class="modal-title" id="newsEditorTitle">📰 Створити новину</h2>

            <form id="newsEditorForm">
                <input type="hidden" id="newsEditId">
                
                <div class="inner-block">
                    <h3>📝 Основна інформація</h3>
                    <input type="text" id="newsTitle" class="form-input" placeholder="Заголовок новини" required maxlength="100" oninput="updateNewsPreview()">
                    <textarea id="newsDescription" class="form-textarea" placeholder="Короткий опис новини (видно на картці)" required maxlength="250" rows="3" oninput="updateNewsPreview()"></textarea>
                    <input type="url" id="newsLink" class="form-input" placeholder="Посилання на повну новину (необов'язково)" oninput="updateNewsPreview()">
                </div>

                <div class="inner-block">
                    <h3>🖼️ Зображення</h3>
                    <p style="color: var(--text-gray); font-size: 13px; margin-bottom: 15px;">
                        Оберіть фото з галереї або завантажте нове
                    </p>
                    <div class="admin-photo-selector" id="newsImageSelector">
                        <!-- Photos will be loaded here -->
                    </div>
                    
                    <div style="margin-top: 15px; text-align: center;">
                        <label class="btn-primary" style="cursor: pointer; display: inline-block;">
                            📤 Завантажити нове фото
                            <input type="file" id="newsImageUpload" accept="image/*" style="display: none;" onchange="handleNewsImageUpload(this)">
                        </label>
                    </div>

                    <div id="newsImagePreview" style="display: none; margin-top: 15px;">
                        <p style="color: var(--primary); font-size: 14px; margin-bottom: 10px;">✓ Вибране фото:</p>
                        <img id="newsImagePreviewImg" style="max-width: 100%; height: 200px; object-fit: cover; border-radius: 12px; border: 2px solid var(--primary);">
                    </div>
                </div>

                <!-- LIVE PREVIEW SECTION -->
                <div class="news-preview-section">
                    <h3 style="color: var(--primary-bright); margin-bottom: 20px; text-align: center; font-size: 20px; font-weight: 800;">
                        👁️ Попередній перегляд
                    </h3>
                    <div class="news-preview-card">
                        <div class="news-preview-image" id="previewImage">
                            <span style="color: var(--text-dim);">Оберіть зображення</span>
                        </div>
                        <div class="news-preview-content">
                            <h3 class="news-preview-title" id="previewTitle">Заголовок новини</h3>
                            <p class="news-preview-description" id="previewDescription">Опис новини з'явиться тут...</p>
                            <div class="news-preview-footer">
                                <span class="news-preview-date" id="previewDate">Сьогодні</span>
                                <span class="news-preview-link" id="previewLink" style="display: none;">Детальніше →</span>
                            </div>
                        </div>
                    </div>
                </div>

                <button type="submit" class="btn-submit" id="newsSubmitBtn" style="margin-top: 30px;">Опублікувати новину</button>
            </form>
        </div>
    </div>

    <!-- LINKS MANAGER MODAL -->
    <div class="modal-overlay" id="linksManagerModal">
        <div class="modal-content">
            <span class="modal-close" onclick="closeModal('linksManagerModal')">&times;</span>
            <h2 class="modal-title">🔗 Управління посиланнями</h2>
            
            <p style="text-align: center; color: var(--text-gray); margin-bottom: 30px;">
                Редагуйте всі посилання на сайті. Система автоматично перевіряє їх працездатність.
            </p>

            <div id="linksContainer" class="links-container">
                <!-- Links will be loaded here -->
            </div>

            <div style="text-align: center; margin-top: 30px;">
                <button class="btn-primary" onclick="checkAllLinks()">
                    🔄 Перевірити всі посилання
                </button>
            </div>
        </div>
    </div>

    <!-- SCRIPTS -->
    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-app.js";
        import { getAuth, signInWithEmailAndPassword, createUserWithEmailAndPassword, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-auth.js";
        import { getFirestore, doc, setDoc, collection, addDoc, onSnapshot, serverTimestamp, query, orderBy, limit, getDoc, deleteDoc, updateDoc } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js";

        const firebaseConfig = {
            apiKey: "AIzaSyATUpLUHSp1VbyxkJXhMS-2R71zNOBGC00",
            authDomain: "dsv-gta.firebaseapp.com",
            projectId: "dsv-gta",
            storageBucket: "dsv-gta.firebasestorage.app",
            messagingSenderId: "661591588818",
            appId: "1:661591588818:web:a8e8dca3d061447e24d20b"
        };

        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);
        const db = getFirestore(app);

        // Initialize AOS
        AOS.init({ duration: 1000, once: true });

        // Sticky Nav
        window.addEventListener('scroll', () => {
            const nav = document.getElementById('mainNav');
            if (window.scrollY > 50) {
                nav.classList.add('scrolled');
            } else {
                nav.classList.remove('scrolled');
            }
        });

        // Burger Menu
        window.toggleMenu = () => {
            document.getElementById('burgerBtn').classList.toggle('active');
            document.getElementById('navLinks').classList.toggle('active');
        };

        // Modal Functions
        window.openModal = (id) => {
            const modal = document.getElementById(id);
            modal.classList.add('active');
            document.body.style.overflow = 'hidden';
        };

        window.closeModal = (id) => {
            const modal = document.getElementById(id);
            modal.classList.remove('active');
            document.body.style.overflow = 'auto';
        };

        // Auth Tab Switching
        window.switchAuthTab = (tab) => {
            document.querySelectorAll('.auth-tab').forEach(btn => btn.classList.remove('active'));
            document.querySelectorAll('.auth-fields').forEach(field => field.classList.remove('active'));
            
            if (tab === 'login') {
                document.querySelector('.auth-tab:first-child').classList.add('active');
                document.getElementById('loginFields').classList.add('active');
            } else {
                document.querySelector('.auth-tab:last-child').classList.add('active');
                document.getElementById('registerFields').classList.add('active');
            }
        };

        // Cabinet Button Handler
        window.handleCabinetClick = () => {
            if (auth.currentUser) {
                window.location.href = "cabinet.html";
            } else {
                openModal('authModal');
            }
        };

        // Login Form
        document.getElementById('loginForm').addEventListener('submit', async (e) => {
            e.preventDefault();
            const email = document.getElementById('loginEmail').value;
            const password = document.getElementById('loginPassword').value;
            const errorEl = document.getElementById('loginError');
            
            errorEl.classList.remove('active');
            
            try {
                await signInWithEmailAndPassword(auth, email, password);
                window.location.href = "cabinet.html";
            } catch (err) {
                errorEl.textContent = "Помилка входу: " + err.message;
                errorEl.classList.add('active');
            }
        });

        // Register Form
        document.getElementById('registerForm').addEventListener('submit', async (e) => {
            e.preventDefault();
            const email = document.getElementById('regEmail').value;
            const password = document.getElementById('regPassword').value;
            const nickname = document.getElementById('regName').value;
            const errorEl = document.getElementById('registerError');
            
            errorEl.classList.remove('active');
            
            if (!nickname) {
                errorEl.textContent = "Заповніть поле NickName!";
                errorEl.classList.add('active');
                return;
            }
            
            try {
                const res = await createUserWithEmailAndPassword(auth, email, password);
                await setDoc(doc(db, "users", res.user.uid), {
                    name: nickname,
                    rank: document.getElementById('regRank').value || "Рекрут",
                    position: document.getElementById('regPos').value || "Боєць",
                    gameID: document.getElementById('regGameID').value || "0",
                    discord: document.getElementById('regDiscord').value || "Не вказано",
                    role: 'user',
                    verified: false,
                    points: 0,
                    warns: 0,
                    reprimands: 0,
                    registeredAt: serverTimestamp()
                });
                window.location.href = "cabinet.html";
            } catch (err) {
                errorEl.textContent = "Помилка реєстрації: " + err.message;
                errorEl.classList.add('active');
            }
        });

        // Application Form
        document.getElementById('applicationForm').addEventListener('submit', async (e) => {
            e.preventDefault();
            const btn = document.getElementById('appSubmitBtn');
            btn.disabled = true;
            btn.textContent = "Відправка...";

            try {
                const appData = {
                    name: document.getElementById('appName').value,
                    age: document.getElementById('appAge').value,
                    rank: document.getElementById('appRank').value,
                    discord: document.getElementById('appDiscord').value,
                    motivation: document.getElementById('appMotivation').value,
                    status: "pending",
                    timestamp: serverTimestamp()
                };
                
                await addDoc(collection(db, "applications"), appData);
                
                // Send Discord notification
                try {
                    await sendNewApplicationWebhook(appData);
                } catch (webhookErr) {
                    console.error('Webhook failed:', webhookErr);
                }
                
                showSuccessToast();
                e.target.reset();
            } catch (err) {
                alert("Помилка: " + err.message);
            } finally {
                btn.disabled = false;
                btn.textContent = "Відправити рапорт";
            }
        });

        // Discord webhook
        async function sendNewApplicationWebhook(appData) {
            try {
                const webhookDoc = await getDoc(doc(db, "settings", "discord"));
                
                if (!webhookDoc.exists() || !webhookDoc.data().webhookUrl) {
                    return;
                }
                
                const webhookUrl = webhookDoc.data().webhookUrl;
                
                const payload = {
                    username: "ДШВ Bot",
                    avatar_url: "https://i.imgur.com/AfFp7pu.png",
                    embeds: [{
                        title: "📝 Новий рапорт на вступ до ДШВ!",
                        description: `Кандидат **${appData.name}** подав рапорт на вступ.`,
                        color: 0xf59e0b,
                        fields: [
                            { name: "👤 Нікнейм", value: appData.name || "Не вказано", inline: true },
                            { name: "⭐ Звання", value: appData.rank || "Не вказано", inline: true },
                            { name: "🎂 Вік", value: String(appData.age || "Не вказано"), inline: true },
                            { name: "💬 Discord", value: appData.discord || "Не вказано", inline: false },
                            { name: "📋 Мотивація", value: (appData.motivation || "Не вказано").substring(0, 300), inline: false }
                        ],
                        footer: { text: "ДШВ | UKRAINE GTA" },
                        timestamp: new Date().toISOString()
                    }]
                };
                
                await fetch(webhookUrl, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload)
                });
            } catch (err) {
                console.error("Webhook error:", err);
            }
        }

        // Fighter Count
        onSnapshot(collection(db, "users"), (snap) => {
            const loading = document.getElementById('loadingCircle');
            const count = document.getElementById('fightersCount');
            loading.style.display = 'none';
            count.style.display = 'block';
            count.textContent = snap.size;
        });

        // Gallery and Why Section
        let allGalleryPhotos = [];
        let currentMainPhotoIndex = 0;

        // Load Gallery
        const galleryQuery = query(collection(db, "gallery"), orderBy("timestamp", "desc"), limit(10));
        onSnapshot(galleryQuery, (snapshot) => {
            allGalleryPhotos = [];
            
            if (snapshot.empty) {
                document.getElementById('galleryMainImage').innerHTML = `
                    <div style="text-align: center; color: var(--text-gray);">
                        <p>Фото скоро з'являться...</p>
                    </div>
                `;
                return;
            }
            
            snapshot.forEach(docSnap => {
                allGalleryPhotos.push({ id: docSnap.id, ...docSnap.data() });
            });

            loadWhySectionImagesFromDB();
            loadMainGalleryViewer();
        });

        async function loadWhySectionImagesFromDB() {
            try {
                const featuredDoc = await getDoc(doc(db, "settings", "featuredPhotos"));
                const featured = featuredDoc.exists() ? featuredDoc.data() : { fact1: 0, fact2: 1, fact3: 2 };

                const whyImages = [
                    { id: 'whyImage1', index: featured.fact1 || 0 },
                    { id: 'whyImage2', index: featured.fact2 || 1 },
                    { id: 'whyImage3', index: featured.fact3 || 2 }
                ];

                whyImages.forEach(item => {
                    const container = document.getElementById(item.id);
                    if (!container) return;

                    if (allGalleryPhotos[item.index]) {
                        const photo = allGalleryPhotos[item.index];
                        container.innerHTML = `<img src="${photo.imageUrl}" alt="${photo.caption || 'Фото'}">`;
                    } else {
                        container.innerHTML = `<div class="why-image-placeholder">Фото незабаром з'явиться</div>`;
                    }
                });
            } catch (err) {
                console.error("Error loading why section images:", err);
            }
        }

        function loadMainGalleryViewer() {
            if (allGalleryPhotos.length === 0) return;
            
            currentMainPhotoIndex = 0;
            updateMainPhoto();
            loadThumbnails();
        }

        function updateMainPhoto() {
            if (allGalleryPhotos.length === 0) return;
            
            const photo = allGalleryPhotos[currentMainPhotoIndex];
            const mainImage = document.getElementById('galleryMainImage');
            const caption = document.getElementById('galleryMainCaption');
            const author = document.getElementById('galleryMainAuthor');
            const counter = document.getElementById('galleryMainCounter');

            mainImage.style.opacity = '0.3';
            
            setTimeout(() => {
                mainImage.innerHTML = `<img src="${photo.imageUrl}" alt="${photo.caption || 'Фото'}" onload="this.parentElement.style.opacity='1'">`;
                caption.textContent = photo.caption || 'Без назви';
                author.textContent = `📸 ${photo.author || 'Анонім'}`;
                counter.textContent = `${currentMainPhotoIndex + 1} / ${allGalleryPhotos.length}`;
            }, 150);
        }

        function loadThumbnails() {
            const thumbContainer = document.getElementById('galleryThumbnails');
            if (!thumbContainer) return;
            
            thumbContainer.innerHTML = '';
            
            allGalleryPhotos.forEach((photo, index) => {
                const thumb = document.createElement('div');
                thumb.className = `gallery-thumb ${index === currentMainPhotoIndex ? 'active' : ''}`;
                thumb.onclick = () => {
                    currentMainPhotoIndex = index;
                    updateMainPhoto();
                    updateActiveThumbnail();
                };
                thumb.innerHTML = `<img src="${photo.imageUrl}" alt="${photo.caption || 'Фото'}">`;
                thumbContainer.appendChild(thumb);
            });
        }

        function updateActiveThumbnail() {
            document.querySelectorAll('.gallery-thumb').forEach((thumb, index) => {
                if (index === currentMainPhotoIndex) {
                    thumb.classList.add('active');
                } else {
                    thumb.classList.remove('active');
                }
            });
        }

        window.changeMainPhoto = (direction) => {
            if (allGalleryPhotos.length === 0) return;
            
            currentMainPhotoIndex += direction;
            
            if (currentMainPhotoIndex >= allGalleryPhotos.length) {
                currentMainPhotoIndex = 0;
            } else if (currentMainPhotoIndex < 0) {
                currentMainPhotoIndex = allGalleryPhotos.length - 1;
            }
            
            updateMainPhoto();
            updateActiveThumbnail();
        };

        // Keyboard navigation
        document.addEventListener('keydown', (e) => {
            if (e.key === 'ArrowLeft') changeMainPhoto(-1);
            if (e.key === 'ArrowRight') changeMainPhoto(1);
        });

        // Update Cabinet Button
        onAuthStateChanged(auth, async user => {
            const btn = document.getElementById('cabinetBtn');
            if (user) {
                btn.textContent = "Особистий кабінет";
                btn.classList.remove('btn-outline');

                try {
                    const userDoc = await getDoc(doc(db, "users", user.uid));
                    if (userDoc.exists() && userDoc.data().role === 'admin') {
                        window.isAdmin = true;
                        
                        // Show admin dropdown
                        const dropdown = document.getElementById('adminDropdown');
                        dropdown.style.display = 'inline-block';
                    }
                } catch (err) {
                    console.error("Error checking admin status:", err);
                }
            }
        });

        // ==================== NEWS SYSTEM ====================
        
        // Load News
        const newsQuery = query(collection(db, "news"), orderBy("date", "desc"), limit(4));
        onSnapshot(newsQuery, (snapshot) => {
            const container = document.getElementById('newsGrid');
            container.innerHTML = '';
            
            if (snapshot.empty) {
                container.innerHTML = '<div class="news-empty">Новини скоро з\'являться...</div>';
                return;
            }
            
            snapshot.forEach(docSnap => {
                const data = docSnap.data();
                const card = document.createElement('div');
                card.className = 'news-card';
                card.setAttribute('data-aos', 'fade-up');
                
                let dateStr = 'Без дати';
                if (data.date) {
                    dateStr = new Date(data.date.toDate()).toLocaleDateString('uk-UA', { 
                        day: '2-digit', 
                        month: '2-digit', 
                        year: 'numeric' 
                    });
                }

                const adminBtns = window.isAdmin ? `
                    <button class="news-edit-btn" onclick="event.stopPropagation(); openNewsEditor('${docSnap.id}')">
                        ✏️
                    </button>
                    <button class="news-delete-btn" onclick="event.stopPropagation(); deleteNews('${docSnap.id}')">
                        🗑️
                    </button>
                ` : '';

                card.innerHTML = `
                    ${adminBtns}
                    <div class="news-image">
                        <img src="${data.imageUrl || '/images/placeholder.jpg'}" alt="${data.title}">
                    </div>
                    <div class="news-content">
                        <h3 class="news-title">${data.title}</h3>
                        <p class="news-description">${data.description}</p>
                        <div class="news-footer">
                            <span class="news-date">${dateStr}</span>
                            ${data.link ? `<a href="${data.link}" target="_blank" class="news-link" onclick="event.stopPropagation()">Детальніше →</a>` : ''}
                        </div>
                    </div>
                `;

                if (data.link) {
                    card.onclick = () => window.open(data.link, '_blank');
                    card.style.cursor = 'pointer';
                }

                container.appendChild(card);
            });
        });

        // News Editor
        let selectedNewsImage = null;
        let customNewsImageBase64 = null;

        window.openNewsEditor = async (newsId = null) => {
            selectedNewsImage = null;
            customNewsImageBase64 = null;
            document.getElementById('newsImagePreview').style.display = 'none';
            
            if (newsId) {
                await loadNewsForEdit(newsId);
            } else {
                document.getElementById('newsEditorTitle').textContent = '📰 Створити новину';
                document.getElementById('newsEditorForm').reset();
                document.getElementById('newsEditId').value = '';
                resetPreview();
            }
            
            loadNewsImageSelector();
            openModal('newsEditorModal');
        };

        async function loadNewsForEdit(newsId) {
            try {
                const newsDoc = await getDoc(doc(db, "news", newsId));
                if (newsDoc.exists()) {
                    const data = newsDoc.data();
                    document.getElementById('newsEditorTitle').textContent = '✏️ Редагувати новину';
                    document.getElementById('newsEditId').value = newsId;
                    document.getElementById('newsTitle').value = data.title;
                    document.getElementById('newsDescription').value = data.description;
                    document.getElementById('newsLink').value = data.link || '';
                    
                    if (data.imageUrl) {
                        selectedNewsImage = data.imageUrl;
                        document.getElementById('newsImagePreview').style.display = 'block';
                        document.getElementById('newsImagePreviewImg').src = data.imageUrl;
                    }
                    
                    updateNewsPreview();
                }
            } catch (err) {
                console.error("Error loading news:", err);
            }
        }

        function loadNewsImageSelector() {
            const container = document.getElementById('newsImageSelector');
            container.innerHTML = '';

            allGalleryPhotos.forEach(photo => {
                const item = document.createElement('div');
                item.className = `admin-photo-item ${selectedNewsImage === photo.imageUrl ? 'selected' : ''}`;
                item.onclick = () => selectNewsImage(photo.imageUrl);
                item.innerHTML = `<img src="${photo.imageUrl}" alt="">`;
                container.appendChild(item);
            });
        }

        function selectNewsImage(imageUrl) {
            selectedNewsImage = imageUrl;
            customNewsImageBase64 = null;
            
            document.getElementById('newsImagePreview').style.display = 'block';
            document.getElementById('newsImagePreviewImg').src = imageUrl;
            
            loadNewsImageSelector();
            updateNewsPreview();
        }

        window.handleNewsImageUpload = (input) => {
            if (input.files && input.files[0]) {
                const reader = new FileReader();
                reader.onload = (e) => {
                    const img = new Image();
                    img.onload = () => {
                        const canvas = document.createElement('canvas');
                        let w = img.width, h = img.height, max = 1200;
                        if (w > h) { if (w > max) { h *= max/w; w = max; } } else { if (h > max) { w *= max/h; h = max; } }
                        canvas.width = w;
                        canvas.height = h;
                        canvas.getContext('2d').drawImage(img, 0, 0, w, h);
                        customNewsImageBase64 = canvas.toDataURL('image/jpeg', 0.8);
                    selectedNewsImage = null;
                    
                    document.getElementById('newsImagePreview').style.display = 'block';
                    document.getElementById('newsImagePreviewImg').src = customNewsImageBase64;
                    
                    document.querySelectorAll('#newsImageSelector .admin-photo-item').forEach(item => {
                        item.classList.remove('selected');
                    });
                    
                    updateNewsPreview();
                };
                img.src = e.target.result;
            };
            reader.readAsDataURL(input.files[0]);
        }
    };

    // Live Preview Functions
    window.updateNewsPreview = () => {
        const title = document.getElementById('newsTitle').value || 'Заголовок новини';
        const description = document.getElementById('newsDescription').value || 'Опис новини з\'явиться тут...';
        const link = document.getElementById('newsLink').value;
        
        document.getElementById('previewTitle').textContent = title;
        document.getElementById('previewDescription').textContent = description;
        
        const previewLinkEl = document.getElementById('previewLink');
        if (link) {
            previewLinkEl.style.display = 'inline';
        } else {
            previewLinkEl.style.display = 'none';
        }
        
        const imageUrl = customNewsImageBase64 || selectedNewsImage;
        const previewImageEl = document.getElementById('previewImage');
        
        if (imageUrl) {
            previewImageEl.innerHTML = `<img src="${imageUrl}" style="width: 100%; height: 100%; object-fit: cover;">`;
        } else {
            previewImageEl.innerHTML = '<span style="color: var(--text-dim);">Оберіть зображення</span>';
        }
        
        // Update date
        const today = new Date().toLocaleDateString('uk-UA', {
            day: '2-digit',
            month: '2-digit',
            year: 'numeric'
        });
        document.getElementById('previewDate').textContent = today;
    };

    function resetPreview() {
        document.getElementById('previewTitle').textContent = 'Заголовок новини';
        document.getElementById('previewDescription').textContent = 'Опис новини з\'явиться тут...';
        document.getElementById('previewLink').style.display = 'none';
        document.getElementById('previewImage').innerHTML = '<span style="color: var(--text-dim);">Оберіть зображення</span>';
    }

    // News Form Submit
    document.getElementById('newsEditorForm').addEventListener('submit', async (e) => {
        e.preventDefault();
        
        const btn = document.getElementById('newsSubmitBtn');
        btn.disabled = true;
        btn.textContent = "Збереження...";

        const title = document.getElementById('newsTitle').value;
        const description = document.getElementById('newsDescription').value;
        const link = document.getElementById('newsLink').value;
        const editId = document.getElementById('newsEditId').value;

        if (!selectedNewsImage && !customNewsImageBase64) {
            alert("Оберіть зображення для новини!");
            btn.disabled = false;
            btn.textContent = editId ? "Оновити новину" : "Опублікувати новину";
            return;
        }

        const imageUrl = customNewsImageBase64 || selectedNewsImage;

        try {
            const newsData = {
                title: title,
                description: description,
                link: link,
                imageUrl: imageUrl,
                date: serverTimestamp()
            };

            if (editId) {
                await updateDoc(doc(db, "news", editId), newsData);
                showNotification("Новину оновлено!");
            } else {
                await addDoc(collection(db, "news"), newsData);
                showNotification("Новину опубліковано!");
            }

            closeModal('newsEditorModal');
            document.getElementById('newsEditorForm').reset();
            resetPreview();
        } catch (err) {
            alert("Помилка: " + err.message);
        } finally {
            btn.disabled = false;
            btn.textContent = editId ? "Оновити новину" : "Опублікувати новину";
        }
    });

    window.deleteNews = async (newsId) => {
        if (!confirm("Видалити цю новину?")) return;
        
        try {
            await deleteDoc(doc(db, "news", newsId));
            showNotification("Новину видалено!");
        } catch (err) {
            alert("Помилка видалення: " + err.message);
        }
    };

    // ==================== ADMIN FUNCTIONS ====================
    
    window.openAdminPanel = () => {
        openModal('adminPanel');
        loadAdminPhotoSelectors();
    };

    async function loadAdminPhotoSelectors() {
        try {
            const featuredDoc = await getDoc(doc(db, "settings", "featuredPhotos"));
            const featured = featuredDoc.exists() ? featuredDoc.data() : { fact1: 0, fact2: 1, fact3: 2 };

            [1, 2, 3].forEach(num => {
                const container = document.getElementById(`adminSelector${num}`);
                container.innerHTML = '';

                allGalleryPhotos.forEach((photo, index) => {
                    const item = document.createElement('div');
                    item.className = `admin-photo-item ${featured[`fact${num}`] === index ? 'selected' : ''}`;
                    item.onclick = () => selectFeaturedPhoto(num, index);
                    item.innerHTML = `<img src="${photo.imageUrl}" alt="">`;
                    container.appendChild(item);
                });
            });
        } catch (err) {
            console.error("Error loading admin selectors:", err);
        }
    }

    async function selectFeaturedPhoto(factNum, photoIndex) {
        try {
            const featuredDoc = await getDoc(doc(db, "settings", "featuredPhotos"));
            const current = featuredDoc.exists() ? featuredDoc.data() : {};

            current[`fact${factNum}`] = photoIndex;

            await setDoc(doc(db, "settings", "featuredPhotos"), current);

            loadAdminPhotoSelectors();
            loadWhySectionImagesFromDB();

            showNotification(`Факт ${factNum} оновлено!`);
        } catch (err) {
            alert("Помилка збереження: " + err.message);
        }
    }

    // ==================== LINKS MANAGER ====================
    
    const defaultLinks = {
        discord: {
            title: "Discord сервер",
            url: "https://discord.gg/ukrainegta",
            category: "social"
        },
        instagram: {
            title: "Instagram",
            url: "https://www.instagram.com/ukraine_gta",
            category: "social"
        },
        youtube: {
            title: "YouTube канал",
            url: "https://www.youtube.com/channel/UCAyONHpqibQDDrCxGiYc_hQ",
            category: "social"
        },
        tiktok: {
            title: "TikTok",
            url: "https://www.tiktok.com/@ukraine_gta",
            category: "social"
        },
        telegram: {
            title: "Telegram",
            url: "https://t.me/ukraine_gta",
            category: "social"
        },
        mainSite: {
            title: "Головний сайт проєкту",
            url: "https://ukraine-gta.com.ua/uk/",
            category: "main"
        },
        gallery: {
            title: "Галерея підрозділу",
            url: "gallery.html",
            category: "internal"
        },
        cabinet: {
            title: "Особистий кабінет",
            url: "cabinet.html",
            category: "internal"
        }
    };

    window.openLinksManager = async () => {
        openModal('linksManagerModal');
        await loadLinksManager();
    };

    async function loadLinksManager() {
        try {
            const linksDoc = await getDoc(doc(db, "settings", "siteLinks"));
            const links = linksDoc.exists() ? linksDoc.data() : defaultLinks;

            const container = document.getElementById('linksContainer');
            container.innerHTML = '';

            const categories = {
                social: "Соціальні мережі",
                main: "Головні посилання",
                internal: "Внутрішні сторінки"
            };

            Object.keys(categories).forEach(category => {
                const categoryTitle = document.createElement('h3');
                categoryTitle.style.cssText = 'color: var(--primary-bright); margin: 30px 0 15px; font-size: 18px; font-weight: 800;';
                categoryTitle.textContent = categories[category];
                container.appendChild(categoryTitle);

                Object.keys(links).forEach(key => {
                    const link = links[key];
                    if (link.category === category) {
                        const item = createLinkItem(key, link);
                        container.appendChild(item);
                    }
                });
            });

        } catch (err) {
            console.error("Error loading links:", err);
        }
    }

    function createLinkItem(key, link) {
        const item = document.createElement('div');
        item.className = 'link-item';
        item.id = `link-${key}`;

        item.innerHTML = `
            <div class="link-header">
                <div class="link-title">
                    🔗 ${link.title}
                </div>
                <div class="link-status" id="status-${key}">
                    <div class="link-status-icon"></div>
                    <span>Не перевірено</span>
                </div>
            </div>
            <div class="link-input-group">
                <input type="url" class="link-input" id="input-${key}" value="${link.url}" placeholder="https://...">
                <button class="link-btn secondary" onclick="checkSingleLink('${key}')">Перевірити</button>
                <button class="link-btn" onclick="saveLink('${key}')">Зберегти</button>
            </div>
            <div class="link-info" id="info-${key}">
                Змініть посилання та натисніть "Зберегти"
            </div>
        `;

        return item;
    }

    window.checkSingleLink = async (key) => {
        const input = document.getElementById(`input-${key}`);
        const status = document.getElementById(`status-${key}`);
        const item = document.getElementById(`link-${key}`);
        const info = document.getElementById(`info-${key}`);
        
        const url = input.value.trim();
        
        if (!url) {
            status.className = 'link-status broken';
            status.innerHTML = '<div class="link-status-icon"></div><span>Порожнє посилання</span>';
            item.className = 'link-item broken';
            return;
        }

        status.className = 'link-status checking';
        status.innerHTML = '<div class="link-status-icon"></div><span>Перевірка...</span>';
        item.className = 'link-item checking';
        info.textContent = 'Очікування відповіді від сервера...';

        try {
            const urlObj = new URL(url);
            
            if (url.startsWith('http://') || url.startsWith('https://')) {
                status.className = 'link-status working';
                status.innerHTML = '<div class="link-status-icon"></div><span>Працює ✓</span>';
                item.className = 'link-item working';
                info.textContent = `Посилання дійсне. Домен: ${urlObj.hostname}`;
            } else {
                status.className = 'link-status working';
                status.innerHTML = '<div class="link-status-icon"></div><span>Працює ✓</span>';
                item.className = 'link-item working';
                info.textContent = 'Внутрішнє посилання';
            }
        } catch (err) {
            status.className = 'link-status broken';
            status.innerHTML = '<div class="link-status-icon"></div><span>Не працює ✗</span>';
            item.className = 'link-item broken';
            info.textContent = `Помилка: ${err.message}`;
        }
    };

    window.saveLink = async (key) => {
        const input = document.getElementById(`input-${key}`);
        const url = input.value.trim();

        if (!url) {
            alert("Введіть посилання!");
            return;
        }

        try {
            const linksDoc = await getDoc(doc(db, "settings", "siteLinks"));
            const links = linksDoc.exists() ? linksDoc.data() : defaultLinks;

            links[key].url = url;

            await setDoc(doc(db, "settings", "siteLinks"), links);

            showNotification(`Посилання "${links[key].title}" збережено!`);
            
            await checkSingleLink(key);
            updatePageLinks(links);
        } catch (err) {
            alert("Помилка збереження: " + err.message);
        }
    };

    window.checkAllLinks = async () => {
        const linksDoc = await getDoc(doc(db, "settings", "siteLinks"));
        const links = linksDoc.exists() ? linksDoc.data() : defaultLinks;

        showNotification("Перевірка всіх посилань...");

        for (const key of Object.keys(links)) {
            await checkSingleLink(key);
            await new Promise(resolve => setTimeout(resolve, 500));
        }

        showNotification("Перевірка завершена!");
    };

    function updatePageLinks(links) {
        if (links.discord) {
            const discordLink = document.querySelector('a[href*="discord"]');
            if (discordLink) discordLink.href = links.discord.url;
        }
        if (links.instagram) {
            const igLink = document.querySelector('a[href*="instagram"]');
            if (igLink) igLink.href = links.instagram.url;
        }
        if (links.youtube) {
            const ytLink = document.querySelector('a[href*="youtube"]');
            if (ytLink) ytLink.href = links.youtube.url;
        }
        if (links.tiktok) {
            const ttLink = document.querySelector('a[href*="tiktok"]');
            if (ttLink) ttLink.href = links.tiktok.url;
        }
        if (links.telegram) {
            const tgLink = document.querySelector('a[href*="t.me"]');
            if (tgLink) tgLink.href = links.telegram.url;
        }
        if (links.mainSite) {
            const mainLink = document.querySelector('a[href*="ukraine-gta.com.ua"]');
            if (mainLink) mainLink.href = links.mainSite.url;
        }
    }

    async function loadAndApplyLinks() {
        try {
            const linksDoc = await getDoc(doc(db, "settings", "siteLinks"));
            if (linksDoc.exists()) {
                updatePageLinks(linksDoc.data());
            }
        } catch (err) {
            console.error("Error loading links:", err);
        }
    }

    loadAndApplyLinks();

    // ==================== UTILITY FUNCTIONS ====================
    
    function showSuccessToast() {
        const form = document.getElementById('applicationForm');
        const container = form.parentElement;
        container.innerHTML = `
            <div style="text-align:center; padding: 50px 20px; animation: fadeInUp 0.5s ease;">
                <div style="font-size: 70px; margin-bottom: 20px;">✅</div>
                <h3 style="font-size: 24px; font-weight: 900; color: var(--primary-bright); margin-bottom: 12px;">Рапорт надіслано!</h3>
                <p style="color: var(--text-gray); font-size: 16px;">Очікуй відповіді від командування ДШВ.<br>Ми розглянемо твою кандидатуру найближчим часом.</p>
            </div>
        `;
    }

    function showNotification(message) {
        const notif = document.createElement('div');
        notif.style.cssText = 'position: fixed; top: 20px; right: 20px; background: var(--primary); color: black; padding: 15px 25px; border-radius: 10px; font-weight: 700; z-index: 9999; animation: slideIn 0.3s ease;';
        notif.textContent = message;
        document.body.appendChild(notif);
        setTimeout(() => notif.remove(), 2000);
    }
</script>
</body>
</html>
```
